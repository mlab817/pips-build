import{r as a,a5 as l,b as c,F as C,j as e,B as p,ai as A,D as j,a7 as h,n as S,X as I,N as T,S as k,a_ as E,a$ as q,b0 as z,_ as F,h as N}from"./vendor.a7738c92.js";import{S as O,a as b,e as f,I as R}from"./index.e6e712f2.js";import{R as _}from"./download-button.component.b6384217.js";import"./new-button.component.600344dd.js";const M=["success","info","warning","error"],v=()=>{const[i,s]=a.exports.useState(!1),[u,r]=a.exports.useState(!1),[d]=l.useForm(),m=async n=>{r(!0);try{const o=await b.post("/announcements",n);S.success({message:f.SUCCESS_MESSAGE,description:o.data.message}),r(!1)}catch(o){S.error({message:f.ERROR_MESSAGE,description:o.response.data.message}),r(!1)}};return c(C,{children:[e(p,{icon:e(A,{}),type:"primary",onClick:()=>s(!0),children:"New"}),e(j,{open:i,title:"New Announcement",closable:!0,onClose:()=>s(!1),extra:e(p,{loading:u,type:"primary",onClick:d.submit,children:"Submit"}),children:c(l,{form:d,initialValues:{type:"",subject:"",message:""},onFinish:m,layout:"vertical",children:[e(l.Item,{name:"type",label:"Type",rules:[{required:!0,message:"This field is required."}],children:e(O,{options:M.map(n=>({label:n,value:n}))})}),e(l.Item,{name:"subject",label:"Subject",rules:[{required:!0,message:"This field is required."}],children:e(h.TextArea,{autoSize:!0})}),e(l.Item,{name:"message",label:"Message",rules:[{required:!0,message:"This field is required."}],children:e(h.TextArea,{autoSize:{minRows:4}})})]})})]})},H=()=>{const[i,s]=a.exports.useState({data:[],pagination:{},loading:!1,error:null}),[u,r]=a.exports.useState(1),d=[{title:"Subject",key:"subject",dataIndex:"subject",width:"20%"},{title:"Message",key:"message",dataIndex:"message",width:"70%"},{title:"Added on",key:"created_at",dataIndex:"created_at",align:"right",render:t=>N(t).fromNow()}],m=async()=>{s(t=>({...t,loading:!0}));try{const t=await b.get("/announcements",{params:{page:u}}),{data:g,pagination:y}=t.data;s(w=>({...w,pagination:y,data:g,loading:!1}))}catch(t){s(g=>({...g,loading:!1,error:t}))}};a.exports.useEffect(()=>{m()},[u]);const n=t=>r(t),[o,x]=a.exports.useState("small");return c(a.exports.Fragment,{children:[e(I,{title:c("span",{children:[e(T,{})," Announcements"]}),extra:c(k,{children:[e(_,{onClick:m}),e(v,{}),e(E,{options:[{value:"small",icon:e(q,{})},{value:"middle",icon:e(z,{})}],onChange:t=>x(t)})]})}),e(R,{children:e(F,{loading:i.loading,rowKey:t=>t.id,dataSource:i.data,columns:d,pagination:{...i.pagination,position:["bottomCenter"],onChange:n,showSizeChanger:!1},size:o})})]})};export{H as default};
