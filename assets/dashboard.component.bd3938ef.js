import{r as s,b as o,j as e,X as F,F as _,s as R,Z as y,e as I,ar as a,V as l,aF as i,aG as c,an as d,h as V,aH as z,aI as m}from "./vendor.b3bf9397.js";import{u as Z,I as k,a as w}from "./index.e5fa85cd.js";const b=(t=0, h=0, r=120)=>{let u=t/100,p=(r-h)*u,g=p+h;return"hsl("+g+", 100%, 50%)"},U=({status:t})=>e(a,{xs:24,sm:12,lg:4,children:o(l,{style:{borderColor:t.color,height:"100%"},children:[e(i,{title:t.name.toUpperCase(),value:t.projects_count}),e("span",{style:{position:"absolute",top:24,right:24},children:e(c,{title:t.name,children:e(d,{style:{color:"gray"}})})})]})}),B=()=>{const[t,h]=s.exports.useState([{name:"DRAFT",projects_count:0},{name:"FINALIZED",projects_count:0},{name:"DROPPED",projects_count:0},{name:"DROPPED BY IPD",projects_count:0}]),[r,u]=s.exports.useState(0),[p,g]=s.exports.useState(0),[x,A]=s.exports.useState(0),[S,E]=s.exports.useState(0),{deadline:T}=Z();return s.exports.useEffect(()=>{const n=new AbortController;return(async()=>{var P;const C=await w.get("/dashboard",{signal:n.signal}),{pips_statuses:D,total:N,validated:v,endorsed:L}=C.data,O=(P=D.filter(j=>j.name==="FINALIZED")[0])==null?void 0:P.projects_count;h(D),u(N),A(v),E(L),g(O)})(),()=>n.abort()},[]),o(s.exports.Fragment,{children:[e(F,{title:o(_,{children:[e(R,{})," Dashboard"]})}),o(k,{children:[e(y,{children:"PIPS STATUS"}),o(I,{gutter:[16,16],children:[t==null?void 0:t.map((n, f)=>(r>0&&Math.round(n.projects_count/r*100),e(U,{status:n},f))),e(a,{xs:24,sm:24,lg:4,children:o(l,{style:{height:"100%"},children:[e(i,{title:"TOTAL",value:r}),e("span",{style:{position:"absolute",top:24,right:24},children:e(c,{title:"Total no. of PAPs encoded by the office in the PIPS",children:e(d,{style:{color:"gray"}})})})]})}),e(a,{xs:24,sm:24,lg:4,children:o(l,{style:{height:"100%"},children:[e(i.Countdown,{title:"TIME UNTIL DEADLINE",value:V(T),prefix:e(z,{}),suffix:"hrs"}),e("span",{style:{position:"absolute",top:24,right:24},children:e(c,{title:"Total no. of PAPs encoded by the office in the PIPS",children:e(d,{style:{color:"gray"}})})})]})})]}),e(y,{children:"VALIDATION AND ENDORSEMENT STATUS"}),o(I,{gutter:[16,16],children:[e(a,{xs:24,sm:12,lg:12,children:o(l,{children:[e(i,{title:"VALIDATED VS FINALIZED",value:x,suffix:" / "+p}),e(m,{strokeColor:b(0),percent:0}),e("span",{style:{position:"absolute",top:24,right:24},children:e(c,{title:"No. of PAPs validated vs those finalized by encoder",children:e(d,{style:{color:"gray"}})})})]})}),e(a,{xs:24,sm:12,lg:12,children:o(l,{children:[e(i,{title:"PIPOL ENDORSED VS FINALIZED",value:S,suffix:" / "+p}),e(m,{strokeColor:b(0),percent:0}),e("span",{style:{position:"absolute",top:24,right:24},children:e(c,{title:"No. of PAPs endorsed in the PIPOL system vs those finalized by encoder",children:e(d,{style:{color:"gray"}})})})]})})]})]})]})};export{B as default};
