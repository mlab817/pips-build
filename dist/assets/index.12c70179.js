import{a9 as _,r as i,b as p,j as s,az as S,$ as P,S as v,af as C,B as u,ay as j,n as m,m as A}from"./vendor.717f8fec.js";import{I as k,f as E,P as w,e as I,Y as B}from"./index.7dcb18bf.js";const R={title:"",type_id:"",regular_program:0,bases:[],description:"",total_cost:0,spatial_coverage_id:"",locations:[],approval_level_id:"",approval_date:"",pip:!1,typology_id:"",trip:!1,cip:!1,cip_type_id:"",gad_id:"",rdip:!1,rdc_endorsement_required:!1,rdc_endorsement_date:"",research:!1,ifp:!1,ict:!1,covid:!1,pdp_chapter_id:"",pdp_chapters:[],pdp_outputs:[],infrastructure_sectors:[],prerequisites:[],implementation_risk:"",fs_infrastructures:[{funding_source_id:1,y2022:0,y2023:0,y2024:0,y2025:0,y2026:0,y2027:0,y2028:0,y2029:0}],expected_outputs:"",agenda:[],sdgs:[],preparation_document_id:"",fs_needs_assistance:!1,fs_completion_date:"",fs_status_id:"",fs_total_cost:0,employment_generated:0,employed_male:0,employed_female:0,funding_sources:[],funding_institutions:[],implementation_mode_id:"",project_status_id:"",category_id:"",prexcs:[],start_year:"",end_year:"",updates:"",readiness_level_id:"",updates_as_of:"",regions:[{region_id:1,y2022:0,y2023:0,y2024:0,y2025:0,y2026:0,y2027:0,y2028:0,y2029:0}],fs_investments:[{funding_source_id:1,y2022:0,y2023:0,y2024:0,y2025:0,y2026:0,y2027:0,y2028:0,y2029:0}],financial_accomplishment:{nep_2023:0,gaa_2023:0,disbursement_2023:0,nep_2024:0,gaa_2024:0,disbursement_2024:0,nep_2025:0,gaa_2025:0,disbursement_2025:0,nep_2026:0,gaa_2026:0,disbursement_2026:0,nep_2027:0,gaa_2027:0,disbursement_2027:0,nep_2028:0,gaa_2028:0,disbursement_2028:0,remarks:""}},q=()=>{const y=()=>window.history.back(),[t]=_.useForm(),[l,o]=i.exports.useState(!1),f=async r=>{o(!0);try{const a=await w.post(r);o(!1),m.success({message:I.SUCCESS_MESSAGE,description:a.data.message}),t.resetFields()}catch(a){o(!1),m.error({message:"Error!",description:a.response.data.message})}},[d,g]=i.exports.useState({nep:0,gaa:0,disbursement:0}),h=(r,a)=>{const n=B.map(e=>`${r}_${e}`).map(e=>({[e]:a[e]})).reduce((e,x)=>(e+=parseFloat(Object.values(x)),e),0);g(e=>({...e,[r]:n})),console.log("totals",d)},b=()=>A.error("Check your inputs!"),F=(r,{financial_accomplishment:a})=>{["nep","gaa","disbursement"].forEach(n=>h(n,a))},c=()=>t.resetFields();return p(i.exports.Fragment,{children:[s(S,{children:s(P,{title:"Add PIP/CIP/TRIP",onBack:y,extra:p(v,{children:[s(C,{title:"Are you sure you want to reset this form? All your inputs will be deleted.",onConfirm:c,children:s(u,{danger:!0,children:"Reset"})}),s(u,{type:"primary",icon:s(j,{}),onClick:t.submit,loading:l,children:"Save"})]})})}),s(k,{children:s(_,{form:t,initialValues:R,onFinish:f,onFinishFailed:b,labelWrap:!0,labelCol:{xl:8,lg:6},wrapperCol:{xl:12,lg:14},layout:"horizontal",onValuesChange:F,disabled:l,scrollToFirstError:!0,onReset:c,children:s(E,{form:t,totals:d})})})]})};export{q as default,R as defaultFields};
