import{R as G,j as e,a as hr,b as o,F as R,B as M,c as gr,H as yr,T as ze,d as Vt,n as ye,h as _e,r as d,m as Ne,e as nt,L as xe,f as fr,D as qe,g as _r,i as Ir,N as zt,k as fe,A as je,u as Qt,l as br,S as $e,o as Pr,p as $t,q as Sr,M as Wt,U as Bt,s as xr,t as Yt,v as Ar,w as vr,x as Cr,y as Er,K as Rr,C as kr,z as wr,E as re,I as Ht,G as Tr,J as Lr,O as We,P as st,Q as Or,V as Kt,W as ot,X as it,Y as Dr,Z as Nr,_ as lt,$ as Xt,a0 as i,a1 as X,a2 as k,a3 as Qe,a4 as Le,a5 as Fr,a6 as Ur,a7 as qr,a8 as ct,a9 as s,aa as jr,ab as H,ac as Mr,ad as Gr,ae as Jt,af as Vr,ag as zr,ah as U,ai as De,aj as Zt,ak as er,al as tr,am as $,an as te,ao as Me,ap as He,aq as Qr,ar as $r,as as dt,at as Ft,au as Ut,av as Wr,aw as Br,ax as Yr,ay as rr,az as Hr,aA as Kr,aB as Xr,aC as w,aD as Jr,aE as Zr,aF as ea}from"./vendor.4b18af18.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const p of a)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function n(a){const p={};return a.integrity&&(p.integrity=a.integrity),a.referrerpolicy&&(p.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?p.credentials="include":a.crossorigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function c(a){if(a.ep)return;a.ep=!0;const p=n(a);fetch(a.href,p)}})();const ta="modulepreload",ra=function(r){return"/"+r},qt={},z=function(t,n,c){return!n||n.length===0?t():Promise.all(n.map(a=>{if(a=ra(a),a in qt)return;qt[a]=!0;const p=a.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${m}`))return;const h=document.createElement("link");if(h.rel=p?"stylesheet":ta,p||(h.as="script",h.crossOrigin=""),h.href=a,document.head.appendChild(h),p)return new Promise((g,_)=>{h.addEventListener("load",g),h.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t())},{Paragraph:aa,Text:na}=ze;class sa extends G.Component{constructor(t){super(t),this.state={hasError:!1,errorMessage:null},this.goBackHome=this.goBackHome.bind(this),this.reload=this.reload.bind(this)}goBackHome(){this.props.navigate("/dashboard")}reload(){window.location.reload()}static getDerivedStateFromError(t){return{hasError:!0,errorMessage:t.toString()}}componentDidCatch(t,n){console.error("ErrorMessage: ",JSON.stringify(t.message)),console.error("Info: ",n)}render(){return this.state.hasError?e(hr,{status:"500",title:"500",subTitle:"Sorry, something went wrong.",extra:o(R,{children:[e(M,{type:"primary",onClick:this.reload,icon:e(gr,{}),children:"Reload"}),e(M,{type:"link",href:"/",icon:e(yr,{}),children:"Back Home"})]}),children:e("div",{style:{backgroundColor:"#fafafa"},children:e(aa,{children:o(na,{strong:!0,style:{fontSize:16},children:["The page you are trying to visit how encountered the following error:"," ",this.state.errorMessage]})})})}):this.props.children}}const b=Vt.create({baseURL:"https://api.pips.da.gov.ph/api",withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});b.interceptors.request.use(r=>{const t=localStorage.getItem("TOKEN");return t&&(r.headers.Authorization=`Bearer ${t}`),r},r=>{console.error(r)});b.interceptors.response.use(r=>r,r=>{if(Vt.isCancel(r)){console.log("request cancelled");return}return r.response.status===500&&ye.error({message:"Error!",description:"Something went wrong"}),Promise.reject(r)});const P=r=>r?`${r}`.replace(/\B(?=(\d{3})+(?!\d))/g,","):0,N=r=>r?r.replace(/\$\s?|(,*)/g,""):0,Ke=r=>r?_e.utc(r).local():null,ar=[2023,2024,2025,2026,2027,2028],x={ADMIN:"ADMIN",PIP_ENCODER:"PIP_ENCODER",PIP_REVIEWER:"PIP_REVIEWER",TRIP_REVIEWER:"TRIP_REVIEWER"},Re={red:"#e41a1c",blue:"#377eb8",green:"#4daf4a",purple:"#984ea3",orange:"#ff7f00",yellow:"#ffff33",brown:"#a65628",pink:"#f781bf",gray:"#999999"},et={SUCCESS_MESSAGE:"Success!",ERROR_MESSAGE:"Error!"},Xe={login:async({username:r,password:t})=>(await b.post("/auth/login",{username:r,password:t})).data,logout:async()=>await b.post("/auth/logout"),me:async()=>(await b.get("/auth/me")).data,updateProfile:async r=>(await b.post("/auth/update-profile",r)).data,updatePassword:async r=>(await b.post("/auth/update-password",r)).data,forgotPassword:async r=>(await b.post("/auth/forgot-password",r)).data,resetPassword:async r=>(await b.post("/auth/reset-password",r)).data,toggleRole:async r=>(await b.post("/auth/toggle-role",r)).data,sendEmailVerification:async()=>(await b.post("/auth/email/verify")).data},nr=d.exports.createContext({}),oa={currentUser:JSON.parse(localStorage.getItem("CURRENT_USER"))||null,token:localStorage.getItem("TOKEN")||null,loading:!1,error:null},O={GET_CURRENT_USER:"user/GET_CURRENT_USER",SET_CURRENT_USER:"user/SET_CURRENT_USER",LOGIN_START:"user/LOGIN_START",LOGIN_SUCCESS:"user/LOGIN_SUCCESS",LOGIN_FAILED:"user/LOGIN_FAILED",LOGOUT_START:"user/LOGOUT_STARTED",LOGOUT_FAILED:"user/LOGOUT_FAILED",LOGOUT_SUCCESS:"user/LOGOUT_SUCCESS",UPDATE_USER_START:"user/UPDATE_USER_START",UPDATE_USER_SUCCESS:"user/UPDATE_USER_SUCCESS",UPDATE_USER_FAILED:"user/UPDATE_USER_FAILED"},ia=(r,t)=>{const{type:n,payload:c}=t;switch(n){case O.SET_CURRENT_USER:case O.UPDATE_USER_SUCCESS:return{...r,loading:!1,currentUser:c};case O.GET_CURRENT_USER:case O.LOGIN_START:case O.LOGOUT_START:case O.UPDATE_USER_START:return{...r,loading:!0};case O.LOGIN_SUCCESS:return{...r,currentUser:c,loading:!1,error:null};case O.LOGIN_FAILED:return{...r,loading:!1,error:c};case O.LOGOUT_SUCCESS:return{...r,loading:!1,currentUser:null,token:null};case O.UPDATE_USER_FAILED:case O.LOGOUT_FAILED:return{...r,loading:!1,error:c};default:return r}},la=({children:r})=>{const[t,n]=d.exports.useReducer(ia,oa,void 0),c=async()=>{if(n({type:O.GET_CURRENT_USER}),!localStorage.getItem("TOKEN")){n({type:O.LOGIN_FAILED});return}try{const g=await Xe.me();localStorage.setItem("CURRENT_USER",JSON.stringify(g.user)),n({type:O.SET_CURRENT_USER,payload:g.user})}catch{n({type:O.LOGIN_FAILED}),localStorage.clear(),window.location.reload()}};d.exports.useEffect(()=>{c()},[]);const a=async({username:h,password:g})=>{n({type:O.LOGIN_START});try{const _=await Xe.login({username:h,password:g}),{access_token:u,user:I}=_;localStorage.setItem("TOKEN",u),localStorage.setItem("CURRENT_USER",JSON.stringify(I)),n({type:O.LOGIN_SUCCESS,payload:I}),Ne.success("Welcome back!")}catch(_){n({type:O.LOGIN_FAILED,payload:_.response.data.message})}},p=async()=>{n({type:O.LOGOUT_START});try{await Xe.logout(),localStorage.clear(),n({type:O.LOGOUT_SUCCESS})}catch(h){n({type:O.LOGOUT_FAILED,payload:h})}},m=async h=>{n({type:O.UPDATE_USER_START});try{const{user:g}=await Xe.updateProfile(h);n({type:O.UPDATE_USER_SUCCESS,payload:g})}catch(g){console.log(g),n({type:O.UPDATE_USER_FAILED})}};return e(nr.Provider,{value:{state:t,loginUser:a,logoutUser:p,updateUserProfile:m},children:r})},Ie=()=>d.exports.useContext(nr),ca={getAll:async(r,t)=>(await b.get(`/projects/${r}/comments`,t)).data,post:async(r,t)=>(await b.post(`/projects/${r}/comments`,t)).data,postComment:async(r,t)=>(await b.post(`/comments/${r}/comment`,t)).data,resolve:async r=>(await b.put(`/comments/${r}`)).data,delete:async r=>(await b.delete(`/comments/${r}`)).data},da={getAll:async(r,t,n)=>(await b.get("/offices",{params:{page:r,q:t,per_page:n}})).data,put:async(r,t)=>(await b.put(`/offices/${r}`,t)).data,delete:async r=>(await b.delete(`/offices/${r}`)).data,assignReviewer:async(r,t)=>(await b.post(`/offices/${r}/assign-reviewer`,t)).data},ke={getAll:async(r=1,t="",n="",c=10)=>(await b.get("/projects",{params:{page:r,q:t,sort:n,per_page:c}})).data,get:async r=>(await b.get(`/projects/${r}`)).data,post:async r=>(await b.post("/projects",r)).data,put:async(r,t)=>(await b.put(`/projects/${r}`,t)).data,delete:async r=>(await b.delete(`/projects/${r}`)).data,lock:async r=>(await b.post(`/projects/${r}/lock`)).data,unlock:async r=>(await b.post(`/projects/${r}/unlock`)).data,comments:async r=>(await b.get(`/projects/${r}/comments`)).data,addComment:async(r,t)=>(await b.post(`/projects/${r}/comments`,t)).data,issue:async r=>(await b.get(`/projects/${r}/issue`)).data,logs:async(r,t)=>(await b.get(`/projects/${r}/logs`,{params:{page:t}})).data,pipolEntry:async(r,t)=>(await b.post(`/projects/${r}/pipol`,t)).data},pa={getAll:async(r,t,n)=>(await b.get("/users",{params:{page:r,q:t,per_page:n}})).data,post:async r=>(await b.post("/users",r)).data,put:async(r,t)=>(await b.put(`/users/${r}`,t)).data,delete:async r=>(await b.delete(`/users/${r}`)).data,assignRoles:async r=>(await b.post("/users/assign-roles",r)).data,assignOffices:async(r,t)=>(await b.post(`/users/${r}/assign-offices`,t)).data,resendWelcomeEmail:async r=>(await b.post(`/users/${r}/resend-welcome-email`)).data},sr=d.exports.createContext({state:{data:[],pagination:{},loading:!1,error:null},loadData:()=>{}}),ua=({children:r})=>{const[t,n]=d.exports.useState({data:[],pagination:{},loading:!1,error:null}),a={state:t,loadData:async(p,m,h)=>{n(g=>({...g,loading:!0}));try{const g=await da.getAll(p,m,h),{data:_,meta:{pagination:u}}=g;n(I=>({...I,loading:!1,data:_,pagination:u}))}catch(g){console.error(g),n(_=>({..._,loading:!1,error:g}))}}};return e(sr.Provider,{value:a,children:r})},vn=()=>d.exports.useContext(sr),or=d.exports.createContext({state:{},page:1,setPage:()=>{},pageSize:10,setPageSize:()=>{},search:"",setSearch:()=>{},sort:"",setSort:()=>{},loadData:()=>{}}),ma=({children:r})=>{const[t,n]=d.exports.useState({data:[],pagination:{},loading:!1,error:null}),[c,a]=d.exports.useState(1),[p,m]=d.exports.useState(10),[h,g]=d.exports.useState(""),[_,u]=d.exports.useState(null),f={state:t,page:c,setPage:a,pageSize:p,setPageSize:m,search:h,setSearch:g,sort:_,setSort:u,loadData:async()=>{n(y=>({...y,loading:!0}));try{const y=await ke.getAll(c,h,_,p),{data:C,meta:{pagination:q}}=y;n(Q=>({...Q,data:C,pagination:q,loading:!1}))}catch(y){n(C=>({...C,loading:!1,error:y}))}}};return e(or.Provider,{value:f,children:r})},Cn=()=>d.exports.useContext(or),ir=d.exports.createContext({state:{data:[],pagination:{},loading:!1,error:null},loadData:()=>{}}),ha=({children:r})=>{const[t,n]=d.exports.useState({data:[],pagination:{},loading:!1,error:null}),c=async(a,p,m)=>{n(h=>({...h,loading:!0}));try{const h=await pa.getAll(a,p,m),{data:g,meta:{pagination:_}}=h;n(u=>({...u,loading:!1,data:g,pagination:_}))}catch(h){n(g=>({...g,loading:!1,error:h}))}};return e(ir.Provider,{value:{state:t,loadData:c},children:r})},En=()=>d.exports.useContext(ir),{Footer:ga}=xe,ya=()=>e(ga,{style:{backgroundColor:"#fff"},children:o(nt,{justify:"space-between",children:[o("div",{children:["PIPS \xA9 ",new Date().getFullYear()," Created by IPD"]}),e("div",{children:e("a",{rel:"noreferrer",target:"_blank",href:"https://manual.pips.da.gov.ph",children:"User Manual"})}),o("div",{children:["v. ","1.2.0-official"]})]})});const pt="/assets/logo.0e2d1476.svg",fa=()=>{const[r,t]=d.exports.useState([]),[n,c]=d.exports.useState(!1);return d.exports.useEffect(()=>{(async()=>{c(!0);try{const p=await b.get("/auth/notifications"),m=p.data.data;let h=[];Object.keys(m).forEach(g=>{h.push(m[g])}),t(h),console.log(p.data.data),c(!1)}catch(p){console.log(p),c(!1)}})()},[]),e(fe,{loading:n,dataSource:r,size:"small",renderItem:a=>{var p,m,h;return o(fe.Item,{style:{alignItems:"start",paddingLeft:8,paddingRight:8,cursor:"pointer"},onClick:a.attachment?window.open(a.attachment):void 0,children:[e(fe.Item.Meta,{avatar:e(je,{children:(p=a.data)==null?void 0:p.sender}),title:(m=a.data)==null?void 0:m.subject,description:(h=a.data)==null?void 0:h.message}),e("small",{children:_e(a.created_at).fromNow()})]})}})},_a=()=>{const[r,t]=d.exports.useState(!1),[n,c]=d.exports.useState([]);return d.exports.useEffect(()=>{(async()=>{try{const p=await b.get("/announcements");c(p.data.data)}catch(p){console.log(p)}})()},[]),e(fe,{itemLayout:r,dataSource:n,renderItem:a=>o(fe.Item,{style:{alignItems:"start",paddingLeft:8,paddingRight:8},children:[e(fe.Item.Meta,{title:a==null?void 0:a.subject,description:a==null?void 0:a.message}),e("small",{children:_e(a==null?void 0:a.created_at).fromNow()})]}),size:"small"})},Ia=()=>{const[r,t]=d.exports.useState(!1),n=[{label:o("span",{children:[e(Ir,{})," Notifications"]}),key:"notifications",children:e(fa,{})},{label:o("span",{children:[e(zt,{})," Announcements"]}),key:"announcements",children:e(_a,{})}];return o(d.exports.Fragment,{children:[e(M,{icon:e(fr,{}),shape:"circle",type:"text",onClick:()=>t(!0)}),e(qe,{open:r,title:"Notifications Center",closable:!0,onClose:()=>t(!1),bodyStyle:{padding:0},children:e(_r,{items:n,centered:!0})})]})},lr=d.exports.createContext({loading:!0,deadline:null,hasPassed:!1,submissionOpen:!1}),ba=({children:r})=>{const[t,n]=d.exports.useState(!1),[c,a]=d.exports.useState(null),[p,m]=d.exports.useState(!1),[h,g]=d.exports.useState(!1),_=async()=>{n(!0);try{const I=await b.get("/deadline"),{deadline:f,has_passed:y,open:C}=I.data;a(f),m(y),g(C),n(!1)}catch(I){console.log(I),n(!1)}};d.exports.useEffect(()=>{_()},[]);const u={loading:t,deadline:c,hasPassed:p,submissionOpen:h};return e(lr.Provider,{value:u,children:r})},Pa=()=>d.exports.useContext(lr),Sa=({left:r})=>{var g;const{state:{currentUser:t},logoutUser:n}=Ie(),c=Qt(),{loading:a,deadline:p,submissionOpen:m}=Pa(),h=e(Wt,{items:[{label:"Manage Account",icon:e(Bt,{}),key:"1",onClick:()=>c("/account")},{label:"Activity Logs",icon:e(xr,{}),key:"2",onClick:()=>c("/activity-logs")},{label:"Logout",icon:e(Yt,{}),key:"3",onClick:()=>{confirm("Are you sure you want to logout?")&&n()}}]});return o(br,{className:"navbar",children:[o($e,{size:"small",children:[r,e("img",{src:pt,height:30,alt:"logo"})]}),e("div",{style:{flex:"auto"}}),o("span",{id:"deadline",style:{display:"none"},children:["Deadline: ",!a&&_e(p).toLocaleString()]}),e("div",{style:{flex:"auto"}}),o($e,{size:"small",children:[e(Pr,{title:m?"Encoding is open.":"Encoding is closed.",children:e($t,{color:m?"green":"red",text:m?"Open":"Closed"})}),e(Ia,{}),e(Sr,{overlay:h,trigger:"click",children:o("span",{style:{cursor:"pointer"},children:[e(je,{style:{backgroundColor:t.color},children:t==null?void 0:t.initials})," ",t==null?void 0:t.first_name," | ",(g=t==null?void 0:t.office)==null?void 0:g.acronym]})})]})]})},jt=[{label:"Dashboard",key:"dashboard",icon:e(Ar,{}),href:"/"},{label:"PIP/TRIP",key:"pips",icon:e(vr,{}),href:"/pips",requiredRoles:[x.PIP_ENCODER,x.ADMIN]},{label:"Tracker",key:"tracker",icon:e(Cr,{}),requiredRoles:[x.PIP_REVIEWER,x.TRIP_REVIEWER,,x.ADMIN],href:"/tracker"},{label:"Reports",key:"reports",icon:e(Er,{}),href:"/reports",requiredRoles:[x.PIP_ENCODER,x.PIP_REVIEWER,x.TRIP_REVIEWER,x.ADMIN]},{type:"divider",requiredRoles:[x.ADMIN]},{label:"Admin",key:"admin",icon:e(Rr,{}),requiredRoles:[x.ADMIN],children:[{label:"Offices",key:"offices",icon:e(kr,{}),href:"/offices",requiredRoles:[x.ADMIN]},{label:"Users",key:"users",icon:e(Bt,{}),href:"/users",requiredRoles:[x.ADMIN]},{label:"Announcements",key:"announcements",icon:e(zt,{}),href:"/announcements",requiredRoles:[x.ADMIN]}]},{type:"divider",requiredRoles:[x.ADMIN]},{label:"User Manual",key:"manual",icon:e(wr,{}),href:"https://docs.da-pips.com"},{type:"divider"},{label:"Logout",key:"logout",icon:e(Yt,{}),danger:!0}],{Content:xa}=xe;re(xe)`
  min-height: 100vh;
  background-color: #fdf8f0;
`;const Aa=re(xa)`
  min-height: calc(100vh - 184px);
  padding-bottom: 24px;
`,va=r=>d.exports.createElement("svg",{id:"loadingSvg",width:226.876,height:61.276,viewBox:"0 0 226.876 61.276",xmlns:"http://www.w3.org/2000/svg",...r},d.exports.createElement("g",{id:"svgGroup",strokeLinecap:"round",fillRule:"evenodd",fontSize:"9pt",stroke:"#000",strokeWidth:"0.25mm",fill:"none",style:{stroke:"#000",strokeWidth:"0.25mm",fill:"none"}},d.exports.createElement("path",{d:"M 26.55 38.626 L 16.2 38.626 A 2.559 2.559 0 0 1 15.259 38.46 Q 14.636 38.216 14.213 37.613 Q 13.621 36.773 13.521 35.442 A 7.518 7.518 0 0 1 13.5 34.876 A 6.784 6.784 0 0 1 13.635 33.456 Q 14.081 31.383 15.998 31.097 A 4.418 4.418 0 0 1 16.65 31.051 L 24.6 31.051 A 7.662 7.662 0 0 0 26.034 30.926 Q 27.702 30.608 28.538 29.476 Q 29.7 27.901 29.7 26.026 L 29.7 13.726 Q 29.7 11.851 28.538 10.276 A 3.576 3.576 0 0 0 26.792 9.027 Q 26.182 8.813 25.429 8.739 A 8.533 8.533 0 0 0 24.6 8.701 L 8.85 8.701 L 8.85 57.676 Q 8.85 61.276 4.35 61.276 A 7.678 7.678 0 0 1 2.735 61.122 Q 0.378 60.612 0.052 58.421 A 5.073 5.073 0 0 1 0 57.676 L 0 5.626 Q 0 3.166 1.121 2.2 A 2.335 2.335 0 0 1 1.35 2.026 Q 2.7 1.126 4.65 1.126 L 26.55 1.126 A 9.683 9.683 0 0 1 28.793 1.402 A 12.918 12.918 0 0 1 30.525 1.951 Q 32.625 2.776 34.575 4.051 L 34.5 4.051 Q 36.45 5.476 37.5 7.763 Q 38.55 10.051 38.55 13.051 L 38.55 26.626 A 14.4 14.4 0 0 1 38.117 30.272 A 9.546 9.546 0 0 1 34.5 35.701 A 17.429 17.429 0 0 1 31.94 37.265 A 14.797 14.797 0 0 1 30.525 37.876 A 12.055 12.055 0 0 1 27.931 38.533 A 10.428 10.428 0 0 1 26.55 38.626 Z",id:0,vectorEffect:"non-scaling-stroke"}),d.exports.createElement("path",{d:"M 80.25 18.826 L 80.25 57.526 Q 80.25 60.982 76.448 61.12 A 8.902 8.902 0 0 1 76.125 61.126 Q 72.476 61.126 71.997 58.408 A 5.09 5.09 0 0 1 71.925 57.526 L 71.925 18.826 A 4.378 4.378 0 0 1 72.171 17.296 Q 72.94 15.226 76.125 15.226 Q 79.686 15.226 80.173 17.909 A 5.14 5.14 0 0 1 80.25 18.826 Z M 81.339 8.161 A 5.75 5.75 0 0 0 81.825 5.776 Q 81.825 3.301 80.175 1.651 A 5.587 5.587 0 0 0 78.51 0.487 A 5.75 5.75 0 0 0 76.125 0.001 A 4.576 4.576 0 0 0 76.12 0.001 A 5.631 5.631 0 0 0 72.038 1.651 Q 70.35 3.301 70.35 5.776 Q 70.35 8.176 72.038 9.826 A 5.848 5.848 0 0 0 73.465 10.863 A 5.756 5.756 0 0 0 76.125 11.476 A 6.932 6.932 0 0 0 76.2 11.475 A 5.496 5.496 0 0 0 80.175 9.826 A 5.587 5.587 0 0 0 81.339 8.161 Z",id:2,vectorEffect:"non-scaling-stroke"}),d.exports.createElement("path",{d:"M 140.475 38.626 L 130.125 38.626 A 2.559 2.559 0 0 1 129.184 38.46 Q 128.561 38.216 128.138 37.613 Q 127.546 36.773 127.446 35.442 A 7.518 7.518 0 0 1 127.425 34.876 A 6.784 6.784 0 0 1 127.56 33.456 Q 128.006 31.383 129.923 31.097 A 4.418 4.418 0 0 1 130.575 31.051 L 138.525 31.051 A 7.662 7.662 0 0 0 139.959 30.926 Q 141.627 30.608 142.463 29.476 Q 143.625 27.901 143.625 26.026 L 143.625 13.726 Q 143.625 11.851 142.463 10.276 A 3.576 3.576 0 0 0 140.717 9.027 Q 140.107 8.813 139.354 8.739 A 8.533 8.533 0 0 0 138.525 8.701 L 122.775 8.701 L 122.775 57.676 Q 122.775 61.276 118.275 61.276 A 7.678 7.678 0 0 1 116.66 61.122 Q 114.303 60.612 113.977 58.421 A 5.073 5.073 0 0 1 113.925 57.676 L 113.925 5.626 Q 113.925 3.166 115.046 2.2 A 2.335 2.335 0 0 1 115.275 2.026 Q 116.625 1.126 118.575 1.126 L 140.475 1.126 A 9.683 9.683 0 0 1 142.718 1.402 A 12.918 12.918 0 0 1 144.45 1.951 Q 146.55 2.776 148.5 4.051 L 148.425 4.051 Q 150.375 5.476 151.425 7.763 Q 152.475 10.051 152.475 13.051 L 152.475 26.626 A 14.4 14.4 0 0 1 152.042 30.272 A 9.546 9.546 0 0 1 148.425 35.701 A 17.429 17.429 0 0 1 145.865 37.265 A 14.797 14.797 0 0 1 144.45 37.876 A 12.055 12.055 0 0 1 141.856 38.533 A 10.428 10.428 0 0 1 140.475 38.626 Z",id:4,vectorEffect:"non-scaling-stroke"}),d.exports.createElement("path",{d:"M 200.325 26.401 L 214.8 26.401 A 10.239 10.239 0 0 1 217.408 26.752 A 12.942 12.942 0 0 1 218.85 27.226 Q 220.95 28.051 222.9 29.401 L 222.825 29.401 A 8.613 8.613 0 0 1 225.62 32.649 A 10.363 10.363 0 0 1 225.825 33.076 A 11.691 11.691 0 0 1 226.727 36.246 A 15.183 15.183 0 0 1 226.875 38.401 L 226.875 48.676 A 14.4 14.4 0 0 1 226.442 52.322 A 9.546 9.546 0 0 1 222.825 57.751 A 17.876 17.876 0 0 1 219.964 59.47 A 15.74 15.74 0 0 1 218.813 59.963 A 12.165 12.165 0 0 1 216.434 60.616 A 10.126 10.126 0 0 1 214.8 60.751 L 198.45 60.751 Q 196.5 60.751 194.438 59.963 A 16.727 16.727 0 0 1 191.222 58.303 A 19.383 19.383 0 0 1 190.425 57.751 A 9.686 9.686 0 0 1 186.644 51.604 A 15.096 15.096 0 0 1 186.375 48.676 L 186.375 43.726 A 3.954 3.954 0 0 1 186.66 42.163 Q 187.388 40.46 189.971 40.235 A 9.569 9.569 0 0 1 190.8 40.201 A 8.428 8.428 0 0 1 192.443 40.346 Q 195.3 40.917 195.3 43.726 L 195.3 48.076 Q 195.3 50.026 196.425 51.601 Q 197.55 53.176 200.325 53.176 L 212.925 53.176 A 7.641 7.641 0 0 0 214.337 53.055 Q 215.109 52.909 215.698 52.589 A 3.3 3.3 0 0 0 216.825 51.601 Q 217.95 50.026 217.95 48.076 L 217.95 39.001 Q 217.95 37.126 216.825 35.513 A 3.478 3.478 0 0 0 215.069 34.221 Q 214.459 34.006 213.701 33.935 A 8.385 8.385 0 0 0 212.925 33.901 L 198.45 33.901 Q 194.799 33.901 190.95 31.403 A 21.914 21.914 0 0 1 190.425 31.051 A 10.231 10.231 0 0 1 186.53 24.184 A 15.188 15.188 0 0 1 186.375 21.976 L 186.375 13.051 A 14.549 14.549 0 0 1 186.622 10.312 A 11.083 11.083 0 0 1 187.425 7.763 Q 188.475 5.476 190.425 4.051 L 190.35 4.051 Q 192.3 2.776 194.4 1.951 Q 196.5 1.126 198.45 1.126 L 214.8 1.126 A 10.239 10.239 0 0 1 217.408 1.477 A 12.942 12.942 0 0 1 218.85 1.951 Q 220.95 2.776 222.9 4.051 L 222.825 4.051 Q 224.775 5.476 225.825 7.763 Q 226.875 10.051 226.875 13.051 L 226.875 17.476 A 3.881 3.881 0 0 1 226.577 19.057 Q 225.847 20.708 223.324 20.957 A 9.699 9.699 0 0 1 222.375 21.001 A 8.153 8.153 0 0 1 220.76 20.855 Q 218.255 20.347 217.983 18.06 A 4.944 4.944 0 0 1 217.95 17.476 L 217.95 13.726 Q 217.95 11.851 216.825 10.276 Q 215.7 8.701 212.925 8.701 L 200.325 8.701 A 7.641 7.641 0 0 0 198.913 8.822 Q 198.141 8.968 197.552 9.288 A 3.3 3.3 0 0 0 196.425 10.276 Q 195.3 11.851 195.3 13.726 L 195.3 21.376 Q 195.3 23.326 196.425 24.863 A 3.415 3.415 0 0 0 198.024 26.04 Q 198.622 26.266 199.371 26.35 A 8.517 8.517 0 0 0 200.325 26.401 Z",id:6,vectorEffect:"non-scaling-stroke"}))),Ca=re(xe)`
  display: flex;
  flex: 1;
  min-height: 100vh !important;
  justify-content: center;
  align-items: center;
  background: #fff !important;

  /* Google chrome */
  @-webkit-keyframes svg-text-anim {
    40% {
      stroke-dashoffset: 0;
      fill: transparent;
    }
    60% {
      stroke-dashoffset: 0;
      fill: #1890ff;
    }
    100% {
      stroke-dashoffset: 0;
      fill: #006837;
    }
  }

  /* Most browsers */
  @keyframes svg-text-anim {
    40% {
      stroke-dashoffset: 0;
      fill: transparent;
    }
    60% {
      stroke-dashoffset: 0;
      fill: #006837;
    }
    100% {
      stroke-dashoffset: 0;
      fill: #006837;
    }
  }
`,cr=()=>{const r=(t,n,c,a,p,m)=>{let h=document.querySelectorAll("#loadingSvg path"),g=m?"infinite":"forwards";for(let _=0;_<h.length;_++){const u=h[_],I=u.getTotalLength();u.style["stroke-dashoffset"]=`${I}px`,u.style["stroke-dasharray"]=`${I}px`,u.style["stroke-width"]=`${c}px`,u.style.stroke=`${p}`,u.style.animation=`${n}s svg-text-anim ${g} ${a}`,u.style["animation-delay"]=`${_*t}s`}};return d.exports.useEffect(()=>{r(.1,2,1,"ease-out","#006837",!0)},[]),o(Ca,{children:[e(Ht,{src:pt,height:100,width:100,alt:"DA logo",style:{borderRadius:"50%",border:"1px solid gray",padding:2,marginTop:-16}}),e(va,{})]})},{Sider:Ea}=xe,{confirm:Ra}=Or,ka=()=>{var t,n,c;const{state:{currentUser:r}}=Ie();return e(nt,{style:{paddingLeft:24,paddingRight:24,paddingTop:16},children:e(st,{type:"info",showIcon:!0,style:{width:"100%"},message:`Office: ${(t=r==null?void 0:r.office)==null?void 0:t.acronym} | Roles: ${(n=r.all_roles)==null?void 0:n.map(a=>a).join(", ")} | Reviews: ${(c=r.reviews)==null?void 0:c.map(({acronym:a})=>a).join(", ")}`})})},wa=()=>{const{state:{currentUser:r},logoutUser:t}=Ie(),n=d.exports.useMemo(()=>jt.filter(I=>{var f;return I.requiredRoles===void 0||((f=I.requiredRoles)==null?void 0:f.some(y=>{var C;return(C=r.all_roles)==null?void 0:C.includes(y)}))}).map(I=>{const{requiredRoles:f,...y}=I;return y}),[jt]),[c,a]=d.exports.useState(0),p=Qt(),m=()=>{Ra({title:"Confirm",content:"Are you sure you want to logout?",onOk:()=>t()})},h=({key:I,item:{props:{href:f}}})=>{console.log("key: ",I),I==="logout"?m():I==="manual"?window.open(f,"_blank").focus():(a(I),p(f))},[g,_]=d.exports.useState(!1);return o(xe,{hasSider:!0,children:[e(Ea,{breakpoint:"lg",collapsedWidth:0,style:{overflow:"auto",height:"100vh",position:"sticky",left:0,top:0},collapsible:!0,trigger:null,collapsed:g,theme:"light",children:e(Wt,{mode:"inline",selectedKeys:[c],items:n,onClick:h})}),o(xe,{children:[e(Sa,{left:e(M,{style:{marginLeft:20},type:"text",icon:g?e(Tr,{}):e(Lr,{}),onClick:()=>_(!g)})}),e(d.exports.Suspense,{fallback:e(cr,{}),children:o(Aa,{children:[e(We,{}),e(ka,{})]})}),e(ya,{})]})]})},Ta=()=>{const{state:{currentUser:r}}=Ie(),t=Kt();return r?e(We,{}):e(ot,{to:"/auth",state:{from:t},replace:!0})},La=()=>{const{state:{currentUser:r}}=Ie();return r?e(ot,{to:"/"}):e(We,{})},Oa=re(xe)`
  display: flex;
  flex: 1;
  min-height: 100vh;
  justify-content: center;
  align-items: center;
  background-color: #fdf8f0;
`,Da=re.div`
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 24px;
`,Na=re.h1`
  text-align: center;
  font-size: 16px;
  margin-bottom: 16px;
  font-family: 'Gugi', cursive;
  color: darkgreen;
`,Fa=re(it)`
  width: 360px;
  padding-bottom: 0;
`,Ua=()=>e(d.exports.Suspense,{fallback:e(cr,{}),children:o(Oa,{children:[o(Fa,{children:[e(Da,{children:e(Ht,{src:pt,height:100,width:100,alt:"DA logo",style:{borderRadius:"50%",border:"1px solid gray",padding:2}})}),e(Na,{children:"Public Investment Program System"}),e(We,{})]}),e("div",{style:{textAlign:"center",marginTop:20},children:e(it,{style:{width:360},children:"\xA9 2022 Investment Programming Division"})}),e("div",{style:{position:"absolute",padding:16,bottom:0},children:o($e,{children:[e(M,{type:"link",size:"large",icon:e(Dr,{}),shape:"circle",target:"_blank",href:"mailto:dapipsystem@gmail.com"}),e(M,{type:"link",size:"large",icon:e(Nr,{}),shape:"circle",target:"_blank",href:"https://www.facebook.com/dapmsipd"})]})})]})}),Ue=({allowedRoles:r})=>{var c;const{state:{currentUser:t}}=Ie(),n=Kt();return(c=t==null?void 0:t.all_roles)!=null&&c.find(a=>r.includes(a))?e(We,{}):e(ot,{to:"/unauthorized",state:{from:n},replace:!0})},{Content:qa}=xe,dr=re(qa)`
  margin-left: 24px;
  margin-right: 24px;
  min-height: calc(100vh - 300px);
`,F=({valueToCopy:r})=>{const t=()=>{qr(r),Ne.success("Successfully copied text.")};return e(Ur,{className:"no-print",style:{cursor:"pointer",color:Re.blue},onClick:t})},Ge=({title:r,valueToCopy:t})=>o(R,{children:[r," ",e(F,{valueToCopy:t})]}),tt=r=>{var n,c,a,p,m,h,g,_,u,I;const t=r.reduce((f,y)=>{var C,q,Q,W,D,v,T,S,J,ae,ne,be,Pe,se,oe,ie,le,ce,de,pe,ue,me;return f.planPeriod+=((C=y.y2023)!=null?C:0)+((q=y.y2024)!=null?q:0)+((Q=y.y2025)!=null?Q:0)+((W=y.y2026)!=null?W:0)+((D=y.y2027)!=null?D:0)+((v=y.y2028)!=null?v:0),f.y2022+=(T=y.y2022)!=null?T:0,f.y2023+=(S=y.y2023)!=null?S:0,f.y2024+=(J=y.y2024)!=null?J:0,f.y2025+=(ae=y.y2025)!=null?ae:0,f.y2026+=(ne=y.y2026)!=null?ne:0,f.y2027+=(be=y.y2027)!=null?be:0,f.y2028+=(Pe=y.y2028)!=null?Pe:0,f.y2029+=(se=y.y2029)!=null?se:0,f.total+=((oe=y.y2022)!=null?oe:0)+((ie=y.y2023)!=null?ie:0)+((le=y.y2024)!=null?le:0)+((ce=y.y2025)!=null?ce:0)+((de=y.y2026)!=null?de:0)+((pe=y.y2027)!=null?pe:0)+((ue=y.y2028)!=null?ue:0)+((me=y.y2029)!=null?me:0),f},{y2022:0,y2023:0,y2024:0,y2025:0,y2026:0,y2027:0,y2028:0,y2029:0,planPeriod:0,total:0});return o(k.Summary.Row,{children:[e(k.Summary.Cell,{index:0,children:"Total"}),e(k.Summary.Cell,{index:1,className:"text-right",children:(n=t.y2022)==null?void 0:n.toLocaleString()}),e(k.Summary.Cell,{index:2,className:"text-right",children:(c=t.y2023)==null?void 0:c.toLocaleString()}),e(k.Summary.Cell,{index:3,className:"text-right",children:(a=t.y2024)==null?void 0:a.toLocaleString()}),e(k.Summary.Cell,{index:4,className:"text-right",children:(p=t.y2025)==null?void 0:p.toLocaleString()}),e(k.Summary.Cell,{index:5,className:"text-right",children:(m=t.y2026)==null?void 0:m.toLocaleString()}),e(k.Summary.Cell,{index:6,className:"text-right",children:(h=t.y2027)==null?void 0:h.toLocaleString()}),e(k.Summary.Cell,{index:7,className:"text-right",children:(g=t.y2028)==null?void 0:g.toLocaleString()}),e(k.Summary.Cell,{index:8,className:"text-right",children:(_=t.y2029)==null?void 0:_.toLocaleString()}),e(k.Summary.Cell,{index:9,className:"text-right",children:(u=t.planPeriod)==null?void 0:u.toLocaleString()}),e(k.Summary.Cell,{index:9,className:"text-right",children:(I=t.total)==null?void 0:I.toLocaleString()})]})},ja=()=>{var f,y,C,q,Q,W,D,v,T,S,J,ae,ne,be,Pe,se,oe,ie,le,ce,de,pe,ue,me,we,Te,Be,Ae,Ye,B,Y,he,mt,ht,gt,yt,ft,_t,It,bt,Pt,St,xt,At,vt,Ct,Et,Rt,kt,wt,Tt,Lt,Ot,Dt,Nt;const{id:r}=lt(),[t,n]=d.exports.useState({}),[c,a]=d.exports.useState([]),[p,m]=d.exports.useState([]),[h,g]=d.exports.useState(null);d.exports.useEffect(()=>{(async()=>{var V,ge;try{const K=await ke.get(r),{project:Z}=K;n(Z);const ee=Z.financial_accomplishment,Se=[2023,2024,2025,2026,2027,2028].map(Ee=>({year:Ee,nep:ee[`nep_${Ee}`],gaa:ee[`gaa_${Ee}`],disbursement:ee[`disbursement_${Ee}`]}));a(Se);const Ce=(ge=JSON.parse((V=Z.issue)==null?void 0:V.issues))!=null?ge:{};console.log(Ce);const Fe=[];Object.keys(Ce).forEach(Ee=>{Fe.push({label:Ee,content:Array.isArray(Ce[Ee])&&Ce[Ee].join(", ")})}),m(Fe)}catch(K){console.log(K),g(K)}})()},[r]);const _=[{title:"Region",key:"name",dataIndex:"name"},{title:"2022 & Prior",key:"y2022",dataIndex:"y2022",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2023",key:"2023",dataIndex:"y2023",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2024",key:"2024",dataIndex:"y2024",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2025",key:"2025",dataIndex:"y2025",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2026",key:"2026",dataIndex:"y2026",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2027",key:"2027",dataIndex:"y2027",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2028",key:"2028",dataIndex:"y2028",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"Continuing Years",key:"2029",dataIndex:"y2029",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},,{title:"2023-2028",key:"plan_period",align:"right",render:(l,V)=>{console.log(V);const{y2023:ge,y2024:K,y2025:Z,y2026:ee,y2027:ve,y2028:Se}=V;return(ge+K+Z+ee+ve+Se).toLocaleString()}},{title:"Total",key:"total",align:"right",render:(l,V)=>{console.log(V);const{y2022:ge,y2023:K,y2024:Z,y2025:ee,y2026:ve,y2027:Se,y2028:Ce,y2029:Fe}=V;return(ge+K+Z+ee+ve+Se+Ce+Fe).toLocaleString()}}],u=[{title:"Funding Source",key:"name",dataIndex:"name"},{title:"2022 & Prior",key:"y2022",dataIndex:"y2022",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2023",key:"2023",dataIndex:"y2023",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2024",key:"2024",dataIndex:"y2024",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2025",key:"2025",dataIndex:"y2025",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2026",key:"2026",dataIndex:"y2026",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2027",key:"2027",dataIndex:"y2027",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2028",key:"2028",dataIndex:"y2028",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"Continuing Years",key:"2029",dataIndex:"y2029",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"2023-2028",key:"plan_period",align:"right",render:(l,V)=>{console.log(V);const{y2023:ge,y2024:K,y2025:Z,y2026:ee,y2027:ve,y2028:Se}=V;return(ge+K+Z+ee+ve+Se).toLocaleString()}},{title:"Total",key:"total",align:"right",render:(l,V)=>{console.log(V);const{y2022:ge,y2023:K,y2024:Z,y2025:ee,y2026:ve,y2027:Se,y2028:Ce,y2029:Fe}=V;return(ge+K+Z+ee+ve+Se+Ce+Fe).toLocaleString()}}],I=[{title:"Year",key:"year",dataIndex:"year"},{title:"NEP",key:"nep",dataIndex:"nep",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"GAA",key:"gaa",dataIndex:"gaa",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})},{title:"Disbursement",key:"disbursement",dataIndex:"disbursement",align:"right",render:l=>o(R,{children:[P(l)," ",e(F,{valueToCopy:l})]})}];return h?e(st,{showIcon:!0,style:{margin:16},type:"error",message:h.response.data.message}):o(R,{children:[e(Xt,{title:o(R,{children:[e(je,{style:{backgroundColor:(f=t.office)==null?void 0:f.color},children:(y=t.office)==null?void 0:y.acronym}),t.title]}),extra:`Last updated ${_e(t.updated_at).fromNow()}`}),e(dr,{children:o($e,{direction:"vertical",children:[o(i,{title:"Submission Information",children:[e(i.Item,{label:"Encoded by",children:(C=t.user)==null?void 0:C.fullname}),e(i.Item,{label:"PIPS Status",children:(q=t.pips_status)==null?void 0:q.name}),e(i.Item,{label:"Last Updated On",children:_e(t.updated_at).toLocaleString()})]}),e(X,{children:"PAP Profile"}),o(i,{title:"General Information",bordered:!0,column:2,children:[e(i.Item,{label:e(Ge,{title:"Title",valueToCopy:t.title}),children:t.title}),e(i.Item,{label:"Program or Project",children:(Q=t.type)==null?void 0:Q.name}),e(i.Item,{label:"Regular Program",children:t.regular_program?"Yes":"No"}),e(i.Item,{label:"Banner Program",children:(W=t.program)==null?void 0:W.name}),e(i.Item,{label:"Basis for Implementation",children:(D=t.basis_details)==null?void 0:D.map(l=>l.name).join(", ")}),e(i.Item,{label:e(Ge,{title:"Description",valueToCopy:t.description}),children:t.description}),e(i.Item,{label:"Total Cost (PhP)",children:P(t.total_cost)})]}),e(i,{title:"Implementing Units",bordered:!0,children:e(i.Item,{label:"Implementing Units",children:(v=t.operating_unit_details)==null?void 0:v.map(l=>l.acronym).join(", ")})}),o(i,{title:"Spatial Coverage",bordered:!0,children:[e(i.Item,{label:"Spatial Coverage",children:(T=t.spatial_coverage)==null?void 0:T.name}),e(i.Item,{label:"Provinces",children:(S=t.location_details)==null?void 0:S.map(l=>l.name).join(", ")})]}),o(i,{title:"DA-Specific Information",bordered:!0,column:2,children:[e(i.Item,{label:"Commodity/ies",children:(J=t.commodity_details)==null?void 0:J.map(l=>l.name).join(", ")}),e(i.Item,{label:"Value Chain Segment/s",children:(ae=t.vc_segment_details)==null?void 0:ae.map(l=>l.name).join(", ")}),e(i.Item,{label:"NAFMIP Outputs",children:(ne=t.nafmip_output_details)==null?void 0:ne.map(l=>l.name).join(", ")}),e(i.Item,{label:"PDP Strategies",children:(be=t.pdp_strategy_details)==null?void 0:be.map(l=>l.name).join(", ")})]}),o(i,{title:"Level of Approval",bordered:!0,column:2,children:[e(i.Item,{label:"Level of Approval",children:(se=(Pe=t.approval_level)==null?void 0:Pe.name)!=null?se:"N/A"}),e(i.Item,{label:"Date of Approval",children:(oe=t.approval_date)!=null?oe:"N/A"})]}),o(i,{title:"PAP for Inclusion in Which Programming Document",bordered:!0,column:2,children:[e(i.Item,{label:"Public Investment Program (PIP)",children:t.pip?"Yes":"No"}),e(i.Item,{label:"Typology of PIP",children:(ie=t.typology)==null?void 0:ie.name}),e(i.Item,{label:"Core Investment Program/Project (CIP)",children:t.cip?"Yes":"No"}),e(i.Item,{label:"Typology of CIP",children:(le=t.cip_type)==null?void 0:le.name}),e(i.Item,{label:"Gender and Development Responsiveness",children:(ce=t.gad)==null?void 0:ce.name}),e(i.Item,{label:"Regional Development Investment Program",children:t.rdip?"Yes":"No"}),e(i.Item,{label:"Will require RDC endorsement?",children:t.rdc_endorsement_required?"Yes":"No"}),e(i.Item,{label:"Date of Endorsement",children:t.rdc_endorsement_date}),e(i.Item,{label:"Research and Development Program/Project",children:t.research?"Yes":"No"}),e(i.Item,{label:"Infrastructure Flagship Project (IFP)",children:t.ifp?"Yes":"No"}),e(i.Item,{label:"ICT Program/Project",children:t.ict?"Yes":"No"}),e(i.Item,{label:"Is it responsive to COVID-19/New Normal Intervention?",children:t.covid?"Yes":"No"})]}),o(i,{title:"Philippine Development Plan (PDP) Chapter",bordered:!0,column:2,children:[e(i.Item,{label:"Main PDP Chapter",children:(pe=(de=t.pdp_chapter)==null?void 0:de.name)!=null?pe:"N/A"}),e(i.Item,{label:"Other PDP Chapters",children:(ue=t.pdp_chapter_details)==null?void 0:ue.map(l=>l.name).join(", ")})]}),e(i,{title:"Philippine Development Plan (PDP) Results Matrix Indicators",bordered:!0}),o(i,{title:"TRIP Requirements",bordered:!0,column:2,children:[e(i.Item,{label:"Infrastructure Sectors",children:(me=t.infrastructure_sector_details)==null?void 0:me.map(l=>l.name).join(", ")}),e(i.Item,{label:"Status of Implementation Readiness",children:(we=t.prerequisite_details)==null?void 0:we.map(l=>l.name).join(", ")}),e(i.Item,{label:e(Ge,{title:"Implementation Risks and Mitigation Strategies",valueToCopy:t.implementation_risk}),children:t.implementation_risk})]}),e(i,{title:"Infrastructure Cost per Funding Source (in absolute PhP)"}),e(k,{dataSource:t.fs_infrastructures,bordered:!0,columns:u,pagination:!1,size:"small",summary:tt}),e(i,{title:"Expected Outputs/Deliverables",bordered:!0,children:e(i.Item,{label:e(Ge,{title:"Expected Outputs/Deliverables",valueToCopy:t.expected_outputs}),children:t.expected_outputs})}),e(i,{title:"Socioeconomic Agenda",bordered:!0,children:e(i.Item,{label:"Socioeconomic Agenda",children:(Te=t.agenda_details)==null?void 0:Te.map(l=>l.name).join(", ")})}),e(i,{title:"Sustainable Development Goals (SDG)",bordered:!0,children:e(i.Item,{label:"Sustainable Development Goals (SDG)",children:(Be=t.sdg_details)==null?void 0:Be.map(l=>l.name).join(", ")})}),o(i,{title:"Project Preparation Details",bordered:!0,children:[e(i.Item,{label:"Project Preparation Document",children:(Ae=t.preparation_document)==null?void 0:Ae.name}),e(i.Item,{label:"Project Preparation Document",children:t.fs_needs_assistance?"Yes":"No"}),e(i.Item,{label:"Completion Date",children:t.fs_completion_date}),e(i.Item,{label:"Status of F/S",children:(Ye=t.fs_status)==null?void 0:Ye.name}),e(i.Item,{label:"F/S Total Cost (PhP)",children:P(t.fs_total_cost)})]}),o(i,{title:"Employment Generation",bordered:!0,children:[e(i.Item,{label:"Employment Generated",children:t.employment_generated}),e(i.Item,{label:"Employment Generated (Male)",children:(B=t.employed_male)!=null?B:"No data"}),e(i.Item,{label:"Employment Generated (Female)",children:(Y=t.employed_female)!=null?Y:"No data"})]}),o(i,{title:"Funding Source and Mode of Implementation",bordered:!0,children:[e(i.Item,{label:"Funding Sources",children:(he=t.funding_source_details)==null?void 0:he.map(l=>l.name).join(", ")}),e(i.Item,{label:"ODA Funding Institution/s",children:(mt=t.funding_institution_details)==null?void 0:mt.map(l=>l.name).join(", ")}),e(i.Item,{label:"Mode of Implementation",children:(gt=(ht=t.implementation_mode)==null?void 0:ht.name)!=null?gt:"No data"})]}),o(i,{title:"Physical and Financial Status",bordered:!0,children:[e(i.Item,{label:"Project Status",children:(yt=t.project_status)==null?void 0:yt.name}),e(i.Item,{label:"Category",children:(ft=t.category)==null?void 0:ft.name}),e(i.Item,{label:"UACS Code/s",children:(_t=t.prexc_details)==null?void 0:_t.map(l=>l.description).join(", ")}),e(i.Item,{label:"Start of Project Implementation",children:t.start_year}),e(i.Item,{label:"Year of Project Completion",children:t.end_year}),e(i.Item,{label:"Level of Readiness",children:(It=t.readiness_level)==null?void 0:It.name}),e(i.Item,{label:e(Ge,{title:"Updates",valueToCopy:t.updates}),children:t.updates}),e(i.Item,{label:"As of",children:t.updates_as_of})]}),e(i,{title:"Investment Cost per Region (in absolute PhP)"}),e(k,{rowKey:l=>l.id,bordered:!0,dataSource:t.regions,columns:_,pagination:!1,size:"small",summary:tt}),e(i,{title:"Investment Cost per Funding Source (in absolute PhP)"}),e(k,{rowKey:l=>l.id,bordered:!0,dataSource:t.fs_investments,columns:u,pagination:!1,size:"small",summary:tt}),e(i,{title:"Financial Accomplishment (in absolute PhP)"}),e(k,{rowKey:l=>l.year,bordered:!0,dataSource:c,columns:I,pagination:!1,size:"small"}),e(X,{children:"Review Information"}),t.issues_count>0?e(i,{title:`Issues (${t.issues_count})`,bordered:!0,column:2,children:p.map((l,V)=>e(i,{label:l.label,children:l.content},V))}):e(Qe,{image:Qe.PRESENTED_IMAGE_SIMPLE,description:"Hooray! No issues here."}),t.checklist?o(i,{title:"Review Findings",column:2,bordered:!0,children:[e(i.Item,{label:"Pass Inclusion/Exclusion Criteria",children:((bt=t.checklist)==null?void 0:bt.pass_inclusion)&&e(Le,{style:{color:Re.green}})}),e(i.Item,{label:"Remarks",children:(Pt=t.checklist)==null?void 0:Pt.pass_inclusion_remarks}),e(i.Item,{label:"Completeness Checks",children:((St=t.checklist)==null?void 0:St.complete)&&e(Le,{style:{color:Re.green}})}),e(i.Item,{label:"Remarks",children:(xt=t.checklist)==null?void 0:xt.complete_remarks}),e(i.Item,{label:"Consistency Checks",children:((At=t.checklist)==null?void 0:At.consistent)&&e(Le,{style:{color:Re.green}})}),e(i.Item,{label:"Remarks",children:(vt=t.checklist)==null?void 0:vt.consistent_remarks}),e(i.Item,{label:"Consultation Checks",children:((Ct=t.checklist)==null?void 0:Ct.consulted)&&e(Le,{style:{color:Re.green}})}),e(i.Item,{label:"Remarks",children:(Et=t.checklist)==null?void 0:Et.consulted_remarks}),e(i.Item,{label:"Cross Validation Checks",children:((Rt=t.checklist)==null?void 0:Rt.cross_validation)&&e(Le,{style:{color:Re.green}})}),e(i.Item,{label:"Remarks",children:(kt=t.checklist)==null?void 0:kt.cross_validation_remarks}),e(i.Item,{label:"PDP Alignment Checks",children:((wt=t.checklist)==null?void 0:wt.pdp_alignment)&&e(Le,{style:{color:Re.green}})}),e(i.Item,{label:"Remarks",children:(Tt=t.checklist)==null?void 0:Tt.pdp_alignment_remarks}),e(i.Item,{label:"Passed Validation",children:t.passes_validation&&e(Le,{style:{color:Re.green}})}),e(i.Item,{label:"Overall Remarks",children:(Lt=t.checklist)==null?void 0:Lt.overall_remarks})]}):e(Qe,{image:Qe.PRESENTED_IMAGE_SIMPLE,description:"Not reviewed yet."}),o(i,{title:"PIPOL Information",bordered:!0,column:2,children:[e(i.Item,{label:"PIPOL Code",children:(Ot=t==null?void 0:t.pipol_code)!=null?Ot:"N/A"}),e(i.Item,{label:"PIPOL Status",children:(Dt=t==null?void 0:t.pipol_status)==null?void 0:Dt.name}),e(i.Item,{label:"PIPOL Status",children:t!=null&&t.pipol_url?o("a",{href:t==null?void 0:t.pipol_url,target:"_blank",rel:"noreferrer",children:[e(Fr,{})," Open"]}):"N/A"}),e(i.Item,{label:"PIPOL Remarks",children:(Nt=t==null?void 0:t.pipol_remarks)!=null?Nt:"N/A"})]})]})})]})},A=r=>e(ct,{filterOption:(n,c)=>{var a;return(a=c.label)==null?void 0:a.toLowerCase().includes(n==null?void 0:n.toLowerCase())},showSearch:!0,allowClear:!0,...r,style:{width:"100%"}}),Oe=[{value:-1,label:"FAILED"},{value:0,label:"PENDING"},{value:1,label:"PASSED"}],Ma={pass_inclusion:0,pass_inclusion_remarks:"",complete:0,complete_remarks:"",consistent:0,consistent_remarks:"",consulted:0,consulted_remarks:"",cross_validation:0,cross_validation_remarks:"",pdp_alignment:0,pdp_alignment_remarks:"",overall_remarks:""},Ga=({project:r})=>{var m;const[t,n]=d.exports.useState(!1),[c]=s.useForm(),a=async h=>{try{const g=await b.post(`/projects/${r.uuid}/checklist`,h);ye.success({message:et.SUCCESS_MESSAGE,description:g.data.message})}catch(g){ye.error({message:et.ERROR_MESSAGE,description:g.response.data.message})}},p={...Ma,...r==null?void 0:r.checklist,passes_validation:r==null?void 0:r.passes_validation};return o(R,{children:[o(M,{onClick:()=>n(!0),children:[e(jr,{})," Review"]}),e(qe,{open:t,title:"Review",size:"large",closable:!0,onClose:()=>n(!1),extra:e(M,{type:"primary",onClick:c.submit,disabled:!((m=r==null?void 0:r.permissions)!=null&&m.validate),children:"Validate"}),children:o(s,{form:c,initialValues:p,labelWrap:!0,onFinish:a,layout:"vertical",children:[e(s.Item,{name:"pass_inclusion",label:"INCLUSION: The PAP passes the inclusion criteria",rules:[{required:!0,message:"This field is required."}],children:e(A,{options:Oe})}),e(s.Item,{name:"pass_inclusion_remarks",label:"Inclusion/Exclusion Remarks",rules:[{required:!0,message:"This field is required."}],children:e(H.TextArea,{autoSize:{minRows:3}})}),e(s.Item,{name:"complete",label:"COMPLETENESS: The PAP passes the completeness criteria",rules:[{required:!0,message:"This field is required."}],children:e(A,{options:Oe})}),e(s.Item,{name:"complete_remarks",label:"CONSULTATION: Remarks on the completeness of the PAP",rules:[{required:!0,message:"This field is required."}],children:e(H.TextArea,{autoSize:{minRows:3}})}),e(s.Item,{name:"consistent",label:"CONSISTENCY: The PAP passes consistency checks.",rules:[{required:!0,message:"This field is required."}],children:e(A,{options:Oe})}),e(s.Item,{name:"consistent_remarks",label:"Remarks on the consistency of the PAP",rules:[{required:!0,message:"This field is required."}],children:e(H.TextArea,{autoSize:{minRows:3}})}),e(s.Item,{name:"consulted",rules:[{required:!0,message:"This field is required."}],label:"CONSULTATION: The PAP passes consultation checks.",children:e(A,{options:Oe})}),e(s.Item,{name:"consulted_remarks",label:"Remarks on the consultation of the PAP with concerned operating units",rules:[{required:!0,message:"This field is required."}],children:e(H.TextArea,{autoSize:{minRows:3}})}),e(s.Item,{name:"cross_validation",label:"CROSS-VALIDATION: The PAP passes cross-validation checks.",rules:[{required:!0,message:"This field is required."}],children:e(A,{options:Oe})}),e(s.Item,{name:"cross_validation_remarks",label:"Remarks on the cross-validation of the PAP with other reference documents",rules:[{required:!0,message:"This field is required."}],children:e(H.TextArea,{autoSize:{minRows:3}})}),e(s.Item,{name:"pdp_alignment",label:"PDP ALIGNMENT: The PAP passes PDP alignment checks.",rules:[{required:!0,message:"This field is required."}],children:e(A,{options:Oe})}),e(s.Item,{name:"pdp_alignment_remarks",label:"Remarks on the validation of the alignment of the PAP with the PDP",rules:[{required:!0,message:"This field is required."}],children:e(H.TextArea,{autoSize:{minRows:3}})}),e(X,{children:"Final Validation Check"}),e(s.Item,{name:"passes_validation",label:"OVERALL: This PAP passes ALL validation checks.",rules:[{required:!0,message:"This field is required."}],extra:"This will decide whether the PAP passes validation or not, and therefore should be submitted in the PIPOL System.",children:e(A,{options:Oe})}),e(s.Item,{name:"overall_remarks",label:"Overall Remarks",rules:[{required:!0,message:"This field is required."}],extra:"Indicate why the reviewer thinks this PAP should be submitted in the PIPOL System.",children:e(H.TextArea,{autoSize:{minRows:3}})}),e(s.Item,{name:"notify_office",valuePropName:"checked",children:e(Mr,{children:"Tick this box if you want to notify the office of this project."})})]})})]})},Va=({comments:r,onSuccess:t})=>{const n=async c=>{try{const a=await ca.delete(c.id);Ne.success("Successfully deleted comment"),t()}catch{Ne.error("An error occurred")}};return e(fe,{dataSource:r,itemLayout:"horizontal",renderItem:c=>e("li",{children:e(Jt,{author:c.author,avatar:e(je,{style:{backgroundColor:c.color},children:c.avatar}),content:c.content,datetime:_e(c.datetime).fromNow(),actions:[e(Vr,{title:"Are you sure you want to delete this comment?",onConfirm:()=>n(c),children:e("span",{style:{color:"red"},children:"Delete"})})]})})})},za=()=>{const{id:r}=lt(),[t,n]=d.exports.useState(!1),c=()=>n(!t),[a,p]=d.exports.useState([]),{state:{currentUser:m}}=Ie(),[h,g]=d.exports.useState(!1),_=async()=>{try{const f=await b.get(`/projects/${r}/comments`);p(f.data.data)}catch(f){Ne.error(f.response.data.message)}};d.exports.useEffect(()=>{_()},[r]);const[u]=s.useForm(),I=async f=>{g(!0);try{const y=await ke.addComment(r,f);ye.success({message:et.SUCCESS_MESSAGE,description:y.message}),g(!1),await _(),u.resetFields()}catch(y){console.log(y),ye.error({message:et.ERROR_MESSAGE,description:y.response.data.message}),g(!1)}};return o(R,{children:[e(M,{type:"text",onClick:c,icon:e(Gr,{}),children:"Comments"}),o(qe,{open:t,title:"Comments",closable:!0,onClose:c,children:[a.length>0&&e(Va,{comments:a,onSuccess:()=>_()}),e(Jt,{avatar:e(je,{style:{backgroundColor:m.color},children:m.initials}),content:o(s,{form:u,onFinish:I,children:[e(s.Item,{name:"comment",style:{marginBottom:8},rules:[{required:!0,message:"Comment cannot be empty."}],children:e(H.TextArea,{placeholder:"Write a comment...",autoSize:{minRows:4}})}),e(s.Item,{children:e(M,{loading:h,htmlType:"submit",type:"primary",children:"Add Comment"})})]})})]})]})},Qa=({project:r})=>{const[t,n]=d.exports.useState(!1),[c,a]=d.exports.useState([]),[p,m]=d.exports.useState(!1);return d.exports.useEffect(()=>{m(!0),(async()=>{try{const g=await ke.issue(r.uuid),{issues:_}=g.data,u=JSON.parse(_),I=Object.keys(u).map(f=>({label:f,content:Array.isArray(u[f])?u[f].join(", "):"Invalid data"})).map((f,y)=>({key:y,label:f.label,content:f.content}));a(I),m(!1)}catch{m(!1)}})()},[r]),o(R,{children:[e(M,{icon:e(zr,{}),type:"text",onClick:()=>n(!0),children:"Issues"}),e(qe,{title:"Issues",open:t,closable:!0,onClose:()=>n(!1),children:e(fe,{loading:p,dataSource:c,pagination:!1,renderItem:h=>o(fe.Item,{children:[e(fe.Item.Meta,{title:h.label}),h.content]})},h=>h.key)})]})},pr=d.exports.createContext({options:{},loadOptions:()=>{},loading:!1,setLoading:()=>{}}),$a=({children:r})=>{const{state:{currentUser:t}}=Ie(),[n,c]=d.exports.useState({agenda:[],approval_levels:[],bases:[],categories:[],cip_types:[],commodities:[],fs_statuses:[],funding_sources:[],funding_institutions:[],gads:[],implementation_modes:[],infrastructure_sectors:[],locations:[],nafmip_outputs:[],pdp_chapters:[],pdp_outputs:[],pdp_strategies:[],pips_statuses:[],pipol_statuses:[],preparation_documents:[],prerequisites:[],prexcs:[],programs:[],project_statuses:[],readiness_levels:[],regions:[],reviewers:[],sdgs:[],spatial_coverages:[],types:[],typologies:[],vc_segments:[]}),a=async()=>{try{const m=await b.get("/all-options");c(m.data.data)}catch{Ne.error("Failed to load options. Please refresh page.")}};d.exports.useEffect(()=>{t&&a()},[t]);const p={options:n};return e(pr.Provider,{value:p,children:r})},ut=()=>d.exports.useContext(pr),{TextArea:Wa}=H,rt=re(U)`
  width: 100% !important;

  input {
    text-align: right !important;
  }
`,Ba=re(it)`
  margin-bottom: 12px;
  padding-top: 16px;
`;re(Wa)``;const Ya="start",{Ribbon:Ha}=$t,L=({text:r,children:t,color:n="#006837"})=>e(Ha,{text:r,placement:Ya,color:n,children:e(Ba,{children:t})});L.propTypes={text:De.exports.string,children:De.exports.node,color:De.exports.string};const Ka=[2022,2023,2024,2025,2026,2027,2028,2029],Xa=r=>({[r]:null,y2022:0,y2023:0,y2024:0,y2025:0,y2026:0,y2027:0,y2028:0,y2029:0}),Ze=({form:r,name:t,label:n,category:c,options:a,fields:p,add:m,remove:h})=>{const g=[{title:n.toUpperCase(),key:t,dataIndex:t,render:(_,u)=>e(s.Item,{name:[u.name,c],noStyle:!0,children:e(ct,{options:a,style:{width:"100%"}})}),width:"10%"},{title:"2022 & Prior",key:"y2022",dataIndex:"y2022",align:"right",render:(_,u)=>e(s.Item,{name:[u.name,"y2022"],noStyle:!0,children:e(U,{bordered:!1,controls:!1,parser:N,formatter:P,style:{width:"100%"}})}),width:"10%"},{title:"2023",key:"y2023",dataIndex:"y2023",align:"right",render:(_,u)=>e(s.Item,{name:[u.name,"y2023"],noStyle:!0,children:e(U,{bordered:!1,controls:!1,parser:N,formatter:P,style:{width:"100%"}})}),width:"10%"},{title:"2024",key:"y2024",dataIndex:"y2024",align:"right",render:(_,u)=>e(s.Item,{name:[u.name,"y2024"],noStyle:!0,children:e(U,{bordered:!1,controls:!1,parser:N,formatter:P,style:{width:"100%"}})}),width:"10%"},{title:"2025",key:"y2025",dataIndex:"y2025",align:"right",render:(_,u)=>e(s.Item,{name:[u.name,"y2025"],noStyle:!0,children:e(U,{bordered:!1,controls:!1,parser:N,formatter:P,style:{width:"100%"}})}),width:"10%"},{title:"2026",key:"y2026",dataIndex:"y2026",align:"right",render:(_,u)=>e(s.Item,{name:[u.name,"y2026"],noStyle:!0,children:e(U,{bordered:!1,controls:!1,parser:N,formatter:P,style:{width:"100%"}})}),width:"10%"},{title:"2027",key:"y2027",dataIndex:"y2027",align:"right",render:(_,u)=>e(s.Item,{name:[u.name,"y2027"],noStyle:!0,children:e(U,{bordered:!1,controls:!1,parser:N,formatter:P,style:{width:"100%"}})}),width:"10%"},{title:"2028",key:"y2028",dataIndex:"y2028",align:"right",render:(_,u)=>e(s.Item,{name:[u.name,"y2028"],noStyle:!0,children:e(U,{bordered:!1,controls:!1,parser:N,formatter:P,style:{width:"100%"}})}),width:"10%"},{title:"Continuing Years",key:"y2029",dataIndex:"y2029",align:"right",render:(_,u)=>e(s.Item,{name:[u.name,"y2029"],noStyle:!0,children:e(U,{bordered:!1,controls:!1,parser:N,formatter:P,style:{width:"100%"}})}),width:"10%"},{title:"Total",key:"total",dataIndex:"total",align:"right",className:"pr-8",render:(_,u)=>Ka.map(I=>r.getFieldValue([t,u.name,`y${I}`])).reduce((I,f)=>(I+=f,I),0).toLocaleString(),width:"10%"},{title:e(Zt,{}),key:"actions",dataIndex:"actions",align:"center",render:(_,u)=>e(er,{style:{color:"red"},onClick:()=>h(u.name)}),width:"5%"}];return o(d.exports.Fragment,{children:[e(k,{rowKey:_=>_.name,dataSource:p,columns:g,pagination:!1,size:"small",summary:_=>{var I,f,y,C,q,Q,W,D,v;const u=_.reduce((T,S)=>{var J,ae,ne,be,Pe,se,oe,ie,le,ce,de,pe,ue,me,we,Te;return T.y2022+=(J=r.getFieldValue([t,S.name,"y2022"]))!=null?J:0,T.y2023+=(ae=r.getFieldValue([t,S.name,"y2023"]))!=null?ae:0,T.y2024+=(ne=r.getFieldValue([t,S.name,"y2024"]))!=null?ne:0,T.y2025+=(be=r.getFieldValue([t,S.name,"y2025"]))!=null?be:0,T.y2026+=(Pe=r.getFieldValue([t,S.name,"y2026"]))!=null?Pe:0,T.y2027+=(se=r.getFieldValue([t,S.name,"y2027"]))!=null?se:0,T.y2028+=(oe=r.getFieldValue([t,S.name,"y2028"]))!=null?oe:0,T.y2029+=(ie=r.getFieldValue([t,S.name,"y2029"]))!=null?ie:0,T.total+=((le=r.getFieldValue([t,S.name,"y2022"]))!=null?le:0)+((ce=r.getFieldValue([t,S.name,"y2023"]))!=null?ce:0)+((de=r.getFieldValue([t,S.name,"y2024"]))!=null?de:0)+((pe=r.getFieldValue([t,S.name,"y2025"]))!=null?pe:0)+((ue=r.getFieldValue([t,S.name,"y2026"]))!=null?ue:0)+((me=r.getFieldValue([t,S.name,"y2027"]))!=null?me:0)+((we=r.getFieldValue([t,S.name,"y2028"]))!=null?we:0)+((Te=r.getFieldValue([t,S.name,"y2029"]))!=null?Te:0),T},{y2022:0,y2023:0,y2024:0,y2025:0,y2026:0,y2027:0,y2028:0,y2029:0,total:0});return o(k.Summary.Row,{children:[e(k.Summary.Cell,{index:0,children:"Total"}),e(k.Summary.Cell,{index:1,className:"text-right pr-8",children:(I=u.y2022)==null?void 0:I.toLocaleString()}),e(k.Summary.Cell,{index:2,className:"text-right pr-8",children:(f=u.y2023)==null?void 0:f.toLocaleString()}),e(k.Summary.Cell,{index:3,className:"text-right pr-8",children:(y=u.y2024)==null?void 0:y.toLocaleString()}),e(k.Summary.Cell,{index:4,className:"text-right pr-8",children:(C=u.y2025)==null?void 0:C.toLocaleString()}),e(k.Summary.Cell,{index:5,className:"text-right pr-8",children:(q=u.y2026)==null?void 0:q.toLocaleString()}),e(k.Summary.Cell,{index:6,className:"text-right pr-8",children:(Q=u.y2027)==null?void 0:Q.toLocaleString()}),e(k.Summary.Cell,{index:7,className:"text-right pr-8",children:(W=u.y2028)==null?void 0:W.toLocaleString()}),e(k.Summary.Cell,{index:8,className:"text-right pr-8",children:(D=u.y2029)==null?void 0:D.toLocaleString()}),e(k.Summary.Cell,{index:9,className:"text-right pr-8",children:(v=u.total)==null?void 0:v.toLocaleString()})]})},style:{marginBottom:16}}),e(M,{icon:e(tr,{}),onClick:()=>m(Xa(c)),children:"Add"})]})};Ze.propTypes={name:De.exports.string,category:De.exports.string,options:De.exports.array};const at=new Date().getFullYear(),Ja=({totals:r})=>{var t,n,c;return o("table",{style:{width:"100%",tableLayout:"auto",marginBottom:16},children:[e("thead",{className:"ant-table-thead",children:o("tr",{children:[e("th",{children:"Year"}),e("th",{children:"NEP"}),e("th",{children:"GAA"}),e("th",{children:"Disbursement"})]})}),e("tbody",{className:"ant-table-tbody",children:ar.map(a=>o("tr",{children:[e("td",{children:a}),e("td",{children:e(s.Item,{noStyle:!0,name:["financial_accomplishment",`nep_${a}`],children:e(rt,{min:0,formatter:P,parser:N,controls:!1,disabled:a>at+1})})}),e("td",{children:e(s.Item,{noStyle:!0,name:["financial_accomplishment",`gaa_${a}`],children:e(rt,{min:0,formatter:P,parser:N,controls:!1,disabled:a>at+1})})}),e("td",{children:e(s.Item,{noStyle:!0,name:["financial_accomplishment",`disbursement_${a}`],children:e(rt,{min:0,formatter:P,parser:N,controls:!1,disabled:a>at})})})]},a))}),e("tfoot",{className:"ant-table-thead",children:o("tr",{children:[e("th",{children:"Total"}),e("th",{style:{textAlign:"right",paddingRight:28},children:(t=r.nep)==null?void 0:t.toLocaleString()}),e("th",{style:{textAlign:"right",paddingRight:28},children:(n=r.gaa)==null?void 0:n.toLocaleString()}),e("th",{style:{textAlign:"right",paddingRight:28},children:(c=r.disbursement)==null?void 0:c.toLocaleString()})]})})]})};const Za=({options:r,fields:t,add:n,remove:c})=>{const a=[{title:"PDP Output Indicator",key:"pdp_output_id",dataIndex:"pdp_output_id",render:(p,m)=>e(s.Item,{name:[m.name,"pdp_output_id"],noStyle:!0,children:e(A,{options:r})}),width:"75%"},{title:"Target",key:"value",dataIndex:"value",align:"right",render:(p,m)=>e(s.Item,{name:[m.name,"value"],noStyle:!0,children:e(U,{bordered:!1,controls:!1,parser:N,formatter:P,style:{width:"100%"}})})},{title:e(Zt,{}),key:"actions",dataIndex:"actions",align:"center",render:(p,m)=>e(er,{style:{color:"red"},onClick:()=>c(m.name)})}];return o(d.exports.Fragment,{children:[e(k,{rowKey:p=>p.name,dataSource:t,columns:a,pagination:!1,tableLayout:"fixed",size:"small",style:{marginBottom:16}}),e(M,{icon:e(tr,{}),onClick:()=>n({pdp_output_id:null,value:0}),children:"Add"})]})},{TextArea:en}=H,{useBreakpoint:tn}=$r,Ve=({...r})=>e(en,{autoSize:{minRows:3,maxRows:5},...r}),Je="YYYY-MM-DD",Mt=()=>{const r=[];let t=2010;for(;t<=2030;)r.push({label:t,value:t}),t++;return r},E={required:[{required:!0,message:"This field is required."}]},j={title:`Reflect the complete title of the program/project in the Project Title textbox. The 
project title to be reflected should be identical with the project\u2019s title in the budget 
proposal to be submitted to DBM, if applicable.`,type_id:`Select if the proposed entry is a Project or a Program. A program is a group of activities and projects that contribute to a common 
particular outcome. A program should have the following: (a) unique expected 
results or outcomes; (b) a clear target population or client group external to the 
agency; (c) a defined method of intervention to achieve the desired result; and (d) 
a clear management structure that defines accountability; and a project is a special undertaking carried out within a definite timeframe and 
intended to result in some pre-determined measure of goods and services.`,description:`Identify the Components of the Program/Project in the Project Description text box
provided. If a Program, please identify the sub-programs/projects and explain the
objective of the program/project in terms of responding to the Philippine
Development Plan (PDP) / Results Matrices (RM).

If the PAP will involve construction of a government facility, specify the definite
purpose for the facility to be constructed.`,total_cost:"Total cost of the program/project. If the PAP is a program, calculate only the sum of the investment requirement from 2023-2028. If project, input the entire cost of the project from start to completion.",spatial_coverage_id:`Select the Spatial Coverage of the program/project from the dropdown list, which 
identifies the following options: Nationwide, Interregional, Region-Specific and 
Abroad. If the coverage is Interregional or Region-Specific, choose the region(s), 
province, and city/municipality covered by the program/project (if applicable) in the 
dropdown field. Note: PAP will still be considered nationwide if it covers all regions except BARMM.`,location:"Select provinces covered by the implementation of the program/project. Regions will automatically be selected if all its provinces are selected.",pip:`The PIP contains priority PAPs to be implemented by NGAs, GOCCs, GFIs
and other NG offices (including SUCs) within the medium-term that
contribute to meeting the targets in the PDP and achieving the outcomes
in the Results Matrix.`,typology_id:`Select under which typology the program/project can be classified as
provided in the guidelines:
(a) Capital investment PAPs to deliver public goods and services that
contribute specifically to the country\u2019s productive capacity (e.g.,
infrastructure development projects, delivery of social services);
(b) Technical assistance PAPs such as research and development,
institutional development, human resource capacity building or
system/process improvements PAPs;
(c) Relending PAPs to local government units (LGUs) or other target
beneficiaries; and
(d) Government Facilities which include the construction, rehabilitation,
improvement of government facilities for the performance of the agencies\u2019
function or mandate and providing support to the attainment of the goals
contained in the 2023-2028 PDP.`,cip:`The CIPs refer to the new or proposed big-ticket programs and projects
under the PIP that serve as pipeline for the ICC and NEDA Board action.`,cip_type_id:"Identify the CIP typology of the program/project.",gad_id:`Identify the Level of GAD Responsiveness of the program/project based on
the score of the program/project using the appropriate Gender and
Development (GAD) checklist (https://neda.gov.ph/gender-and-
development/).`,trip:`The TRIP contains nationally-funded infrastructure projects irrespective of
cost with emphasis on immediate priorities to be undertaken in three-year
period.`,rdip:"Indicate if the program/project is included in the RDIP.",research:"Indicate if the Program/Project is a Research and Development Program/Project.",covid:"Indicate if the program/project is a strategic response to the COVID-19 pandemic or is a New Normal Intervention.",approval_level_id:`If the project/program will require ICC/NEDA Board approval, kindly provide the 
status of ICC/NEDA Board processing of the program/project in the Level of 
Approval box`,employment_generated:`Provide the Estimated no. of persons to be employed by the program/project in the 
text box field for Employment Generation. Indicate the number of persons to be 
employed by the project outside of the implementing agency.
`,category_id:`Under Category, click whether the program/project is Tier 1 or Tier 2. If the 
program/project is categorized as Tier 1, provide the UACS Code in the text box field. 
For Tier 2 (New and Expanded), indicate whether the program/project is New or 
Expanded.`,uacs_code:`Refers to the 15-digit code within the UACS Code 
that provides reference to the Sector/Horizontal Outcomes, Program/ Project, Major 
Final Output/ Project Category, Activity Level 1/Sub-Category and Activity Level 2 
/ Project Title`},ur=({form:r,totals:t,mode:n="create"})=>{const c=tn(),{options:a}=ut(),{agenda:p,approval_levels:m,bases:h,categories:g,cip_types:_,commodities:u,fs_statuses:I,funding_sources:f,funding_institutions:y,gads:C,implementation_modes:q,infrastructure_sectors:Q,locations:W,nafmip_outputs:D,offices:v,operating_units:T,pdp_chapters:S,pdp_indicators:J,pdp_outputs:ae,pdp_strategies:ne,pips_statuses:be,pipol_statuses:Pe,preparation_documents:se,prerequisites:oe,prexcs:ie,programs:le,project_statuses:ce,readiness_levels:de,regions:pe,sdgs:ue,spatial_coverages:me,types:we,typologies:Te,vc_segments:Be}=a,{state:{currentUser:Ae}}=Ie(),Ye=d.exports.useMemo(()=>{var B;return(B=Ae.reviews)==null?void 0:B.map(Y=>({label:Y.acronym,value:Y.id}))},[Ae]);return o(d.exports.Fragment,{children:[!c.lg&&e(st,{type:"warning",showIcon:!0,message:"This form contains fields in table form. It may not display properly in smaller screens. Please use a laptop or desktop to view this form properly.",style:{marginBottom:16}}),o(L,{text:"General Information",children:[(Ae==null?void 0:Ae.all_roles.includes(x.PIP_REVIEWER))&&n==="create"&&e(s.Item,{name:"office_id",label:"Office",hasFeedback:!0,rules:E.required,extra:"Note: This cannot be changed after creation.",children:e(A,{options:Ye})}),e(s.Item,{name:"title",label:"Project Title",hasFeedback:!0,rules:E.required,tooltip:j.title,children:e(Ve,{showCount:!0,rows:2,maxLength:255})}),e(s.Item,{name:"type_id",label:"Program or Project",hasFeedback:!0,rules:E.required,tooltip:j.type_id,children:e(A,{options:we})}),e(s.Item,{name:"regular_program",valuePropName:"checked",label:"Regular Program",tooltip:"If Program is selected, indicate if it is a Regular Program or not by ticking this checkbox.",children:e($,{checkedChildren:e(te,{})})}),e(s.Item,{name:"program_id",label:"Banner/Parent Program",tooltip:"If Program is selected, select the Banner Program that the PAP is aligned with.",rules:E.required,children:e(A,{options:le})}),e(s.Item,{name:"bases",label:"Basis for Implementation",hasFeedback:!0,extra:"Select as many as applicable",rules:E.required,children:e(A,{mode:"multiple",options:h})}),e(s.Item,{name:"description",label:"Description",rules:E.required,tooltip:j.description,extra:"This shall also serve as a justification for inclusion of the PAP in the PIP/TRIP.",children:e(Ve,{showCount:!0,maxLength:500})}),e(s.Item,{name:"total_cost",label:"Total Cost (in absolute PhP terms)",rules:E.total_cost,tooltip:j.total_cost,children:e(U,{controls:!1,formatter:P,parser:N,style:{width:"100%",textAlign:"right"}})})]}),e(L,{text:"Implementing Units",children:e(s.Item,{label:"Implement Units",name:"operating_units",extra:"Select as many as applicable",rules:[{required:!0}],tooltip:"",children:e(A,{options:T,mode:"multiple"})})}),o(L,{text:"Spatial Coverage",children:[e(s.Item,{hasFeedback:!0,label:"Spatial Coverage",name:"spatial_coverage_id",rules:E.required,tooltip:j.spatial_coverage_id,children:e(A,{options:me})}),e(s.Item,{label:"Regions/Provinces",name:"locations",tooltip:j.location,extra:"Select as many as applicable",children:e(Me,{treeCheckable:!0,treeData:W,treeDefaultExpandAll:!0,treeLine:!0,maxTagCount:10,fieldNames:{value:"value",title:"label"}})})]}),o(L,{text:"DA-Specific Information",children:[e(s.Item,{name:"commodities",label:"Commodity/ies",extra:"Select as many as applicable",children:e(A,{options:u,mode:"multiple"})}),e(s.Item,{name:"vc_segments",label:"Value Chain Segments",extra:"Select as many as applicable",children:e(A,{options:Be,mode:"multiple"})}),e(s.Item,{hasFeedback:!0,label:"NAFMIP Outputs",extra:"Select as many as applicable",name:"nafmip_outputs",rules:E.required,children:e(A,{options:D,mode:"multiple"})}),e(s.Item,{hasFeedback:!0,label:"MYP Strategies",extra:"Select as many as applicable",name:"pdp_strategies",rules:E.required,children:e(A,{options:ne,mode:"multiple"})})]}),o(L,{text:"Level of Approval",children:[e(s.Item,{hasFeedback:!0,label:"Level of Approval",name:"approval_level_id",rules:E.required,tooltip:j.approval_level_id,children:e(A,{options:m})}),e(s.Item,{label:"Date of Approval",name:"approval_level_date",children:e(He,{format:Je})})]}),o(L,{text:"Project for Inclusion in Which Programming Document",children:[e(X,{children:"PIP"}),e(s.Item,{name:"pip",valuePropName:"checked",label:"Public Investment Program",tooltip:j.pip,children:e($,{checkedChildren:e(te,{})})}),e(s.Item,{hasFeedback:!0,label:"PIP Typology",name:"typology_id",rules:E.required,tooltip:j.typology_id,children:e(A,{options:Te})}),e(X,{children:"TRIP"}),e(s.Item,{name:"trip",label:"Three Year Rolling Infrastructure Program/Project",valuePropName:"checked",tooltip:"If the PAP has infrastructure component/s",extra:"Fill up required fields in the TRIP requirement section.",children:e($,{checkedChildren:e(te,{})})}),e(s.Item,{name:"ifp",valuePropName:"checked",label:"Infrastructure Flagship Project (IFP)",extra:"Not required",children:e($,{checkedChildren:e(te,{}),disabled:!0})}),e(X,{children:"CIP"}),e(s.Item,{name:"cip",valuePropName:"checked",label:"Core Investment Program/Project",tooltip:j.cip,children:e($,{checkedChildren:e(te,{})})}),e(s.Item,{hasFeedback:!0,label:"CIP Typology",name:"cip_type_id",tooltip:j.cip_type_id,rules:E.required,extra:"If CIP, select which typology else select Not Applicable",children:e(A,{options:_})}),e(s.Item,{hasFeedback:!0,label:"Level of GAD Responsiveness",name:"gad_id",rules:E.required,tooltip:j.gad_id,extra:"Required if PAP is classified as CIP",children:e(A,{options:C})}),e(X,{children:"RDIP"}),e(s.Item,{name:"rdip",valuePropName:"checked",label:"Regional Development Investment Program/Project",tooltip:j.rdip,children:e($,{checkedChildren:e(te,{})})}),e(s.Item,{name:"rdc_endorsement_required",valuePropName:"checked",label:"Will require Regional Development Council (RDC) Endorsement?",tooltip:"If PAP is included in the RDIP",children:e($,{checkedChildren:e(te,{})})}),e(s.Item,{hasFeedback:!0,label:"RDC Endorsement Date",name:"rdc_endorsement_date",tooltip:"If PAP is included in the RDIP",children:e(He,{format:Je})}),e(X,{children:"Others"}),e(s.Item,{name:"research",valuePropName:"checked",tooltip:j.research,label:"Research and Development Program/Project",children:e($,{checkedChildren:e(te,{})})}),e(s.Item,{name:"ict",valuePropName:"checked",label:"ICT Program/Project",extra:"Not required",children:e($,{checkedChildren:e(te,{}),disabled:!0})}),e(s.Item,{name:"covid",valuePropName:"checked",tooltip:j.covid,label:"Is it responsive to COVID-19/New Normal Intervention?",children:e($,{checkedChildren:e(te,{})})})]}),o(L,{text:"Philippine Development Plan (PDP) Chapter",children:[e(s.Item,{hasFeedback:!0,label:"Main PDP Chapter",name:"pdp_chapter_id",rules:E.required,extra:"Select the most appropriate one",children:e(Me,{showSearch:!0,treeData:S,treeDefaultExpandAll:!0,fieldNames:{value:"value",title:"label"},treeNodeFilterProp:"label"})}),e(s.Item,{hasFeedback:!0,label:"Other PDP Chapters",extra:"Select as many as applicable",name:"pdp_chapters",children:e(Me,{showSearch:!0,treeData:S,treeDefaultExpandAll:!0,treeCheckable:!0,fieldNames:{value:"value",title:"label"},treeNodeFilterProp:"label"})})]}),o(L,{text:"PDP Chapter Outputs (Infrastructure Only)",children:[e("div",{style:{marginBottom:16},children:e(ze.Text,{children:e("small",{children:"Indicate other expected outputs/deliverables in the Expected Outputs/Deliverables field."})})}),e(s.List,{name:"pdp_outputs",children:(B,{add:Y,remove:he})=>e(Za,{form:r,name:"pdp_outputs",options:ae,fields:B,add:Y,remove:he})})]}),o(L,{text:"TRIP Requirements",children:[e(s.Item,{hasFeedback:!0,label:"Infastructure Sectors",name:"infrastructure_sectors",rules:E.required,extra:"Select as many as applicable",children:e(Me,{treeData:Q,treeDefaultExpandAll:!0,treeCheckable:!0,fieldNames:{value:"value",title:"label"}})}),e(s.Item,{hasFeedback:!0,label:"Status of Implementation Readiness",name:"prerequisites",rules:E.required,extra:"Select as many as applicable",children:e(A,{options:oe,mode:"multiple"})}),e(s.Item,{hasFeedback:!0,label:"Implementation Risks and Mitigation Strategies",name:"implementation_risk",rules:E.required,children:e(Ve,{showCount:!0,rows:4,maxLength:500})})]}),o(L,{text:"Infrastructure Cost per Funding Source (in absolute PhP)",color:"black",children:[e(s.List,{name:"fs_infrastructures",children:(B,{add:Y,remove:he})=>e(Ze,{form:r,name:"fs_infrastructures",category:"funding_source_id",options:f,fields:B,label:"Funding Source",add:Y,remove:he})}),e("p",{style:{marginTop:16},children:e(ze.Text,{children:"Duplicate entries will throw an error."})})]}),e(L,{text:"Expected Outputs/Deliverables",children:e(s.Item,{hasFeedback:!0,label:"Expected Outputs/Deliverables",name:"expected_outputs",rules:E.required,children:e(Ve,{placeholder:"Enumerate the Expected Outputs (or Actual Deliverables) of the program/project in the text box provided. Please provide specific outputs and units of measure (e.g., 100 km of FMRs, 1,000 seeds distributed, etc.).",showCount:!0,rows:4,maxLength:500})})}),e(L,{text:"Socioeconomic Agenda",children:e(s.Item,{hasFeedback:!0,label:"Socioeconomic Agenda",extra:"Select as many as applicable",name:"agenda",rules:E.required,children:e(A,{options:p,mode:"multiple"})})}),e(L,{text:"Sustainable Development Goals (SDG)",children:e(s.Item,{hasFeedback:!0,label:o("span",{children:["Sustainable Development Goals"," ",e("a",{href:"https://sdgs.un.org/goals",rel:"noreferrer",target:"_blank",children:e(Qr,{})})]}),extra:"Select as many as applicable",name:"sdgs",rules:E.required,children:e(A,{options:ue,mode:"multiple"})})}),o(L,{text:"Pre-Construction Costs",children:[e(s.Item,{name:"has_row_rap",label:"Has Right of Way and Resettlement Action Plan",valuePropName:"checked",children:e($,{})}),e(X,{children:"Right of Way"}),e(s.Item,{name:"has_row",label:"Right of Way",valuePropName:"checked",children:e($,{})}),e(s.Item,{name:"row_total_cost",label:"Right of Way Total Cost (in absolute PhP terms)",children:e(U,{controls:!1,formatter:P(),parser:N})}),e(s.Item,{name:"row_households",label:"No. of Households Affected",children:e(U,{controls:!1,formatter:P(),parser:N})}),e(X,{children:"Resettlement Action Plan"}),e(s.Item,{name:"has_rap",label:"Resettlement Action Plan",valuePropName:"checked",children:e($,{})}),e(s.Item,{name:"rap_total_cost",label:"Resettlement Action Plan Total Cost (in absolute PhP terms)",children:e(U,{controls:!1,formatter:P(),parser:N})}),e(s.Item,{name:"rap_households",label:"No. of Households Affected",children:e(U,{controls:!1,formatter:P(),parser:N})})]}),o(L,{text:"Project Preparation Details",children:[e(s.Item,{hasFeedback:!0,label:"Project Preparation Document",name:"preparation_document_id",rules:E.required,children:e(A,{options:se})}),e(X,{children:"Details of Feasibility Study"}),e(s.Item,{name:"fs_needs_assistance",valuePropName:"checked",label:"Will require assistance for the conduct of F/S (from NEDA)?",children:e($,{checkedChildren:e(te,{})})}),e(s.Item,{name:"fs_completion_date",label:"F/S Completion Date",children:e(He,{format:Je})}),e(s.Item,{label:"Status of FS/",name:"fs_status_id",children:e(A,{options:I})}),e(s.Item,{label:"Total Cost of F/S (in absolute PhP terms)",name:"fs_total_cost",children:e(U,{style:{width:"100%"},formatter:P,parser:N,controls:!1})})]}),o(L,{text:"Employment Generation",children:[e(s.Item,{label:"Employment Generated (individuals)",name:"employment_generated",rules:E.required,tooltip:j.employment_generated,children:e(U,{formatter:P,parser:N,controls:!1})}),e(s.Item,{label:"No. of Males Employed",name:"employed_male",children:e(U,{formatter:P,parser:N,controls:!1})}),e(s.Item,{label:"No. of Females Employed",name:"employed_female",children:e(U,{formatter:P,parser:N,controls:!1})})]}),o(L,{text:"Funding Source and Mode of Implementation",children:[e(s.Item,{label:"Main Funding Source",extra:"Select one",name:"funding_source_id",rules:[{required:!0,message:"This field is required."}],children:e(A,{options:f})}),e(s.Item,{label:"Funding Sources",extra:"Select as many as applicable. Please re-select MAIN FUNDING SOURCE as well.",name:"funding_sources",rules:[{required:!0,message:"This field is required."}],children:e(A,{options:f,mode:"multiple"})}),e(s.Item,{label:"ODA Funding Institution",extra:"Select as many as applicable",name:"funding_institutions",children:e(A,{options:y,mode:"multiple"})}),e(s.Item,{label:"Mode of Implementation/Procurement",name:"implementation_mode_id",rules:E.required,children:e(A,{options:q})})]}),o(L,{text:"Physical and Financial Status",children:[e(s.Item,{hasFeedback:!0,label:"Project Status",name:"project_status_id",rules:E.required,children:e(A,{options:ce})}),e(s.Item,{hasFeedback:!0,label:"Category",name:"category_id",rules:E.required,tooltip:j.category_id,children:e(A,{options:g})}),e(s.Item,{label:"UACS Code/s",name:"prexcs",tooltip:j.uacs_code,extra:"Program-level UACS code. Select N/A if the program/project is entirely new.",children:e(Me,{showSearch:!0,treeData:ie,treeCheckable:!0,treeDefaultExpandAll:!0,maxTagCount:5,treeNodeFilterProp:"label"})}),e(s.Item,{hasFeedback:!0,label:"Start of Project Implementation",name:"start_year",rules:E.required,children:e(A,{options:Mt()})}),e(s.Item,{hasFeedback:!0,label:"Year of Project Completion",name:"end_year",rules:E.required,children:e(A,{options:Mt()})}),e(s.Item,{hasFeedback:!0,label:"Level of Readiness",name:"readiness_level_id",rules:E.required,children:e(A,{options:de})}),e(s.Item,{hasFeedback:!0,label:"Updates",name:"updates",rules:E.required,children:e(Ve,{showCount:!0,rows:4,maxLength:500})}),e(s.Item,{hasFeedback:!0,label:"As of",name:"updates_as_of",rules:E.required,children:e(He,{format:Je})})]}),o(L,{text:"Investment Cost per Region (in absolute PhP)",color:"black",children:[e(s.List,{name:"regions",children:(B,{add:Y,remove:he})=>e(Ze,{form:r,name:"regions",category:"region_id",options:pe,label:"Region",fields:B,add:Y,remove:he})}),e("p",{style:{marginTop:16},children:e(ze.Text,{children:"Duplicate entries will throw an error."})})]}),o(L,{text:"Investment Cost per Funding Source (in absolute PhP)",color:"black",children:[e(s.List,{name:"fs_investments",children:(B,{add:Y,remove:he})=>e(Ze,{form:r,name:"fs_investments",category:"funding_source_id",options:f,label:"Funding Source",fields:B,add:Y,remove:he})}),e("p",{style:{marginTop:16},children:e(ze.Text,{children:"Duplicate entries will throw an error."})})]}),e(L,{text:"Financial Accomplishments (in absolute PhP)",color:"orange",children:e(Ja,{totals:t})}),e(L,{text:"Remarks",children:e(s.Item,{label:"Remarks",name:"remarks",children:e(H.TextArea,{allowClear:!0,placeholder:"Remarks",showCount:!0,maxLength:255,autoSize:{minRows:5,maxRows:5}})})})]})};ur.propTypes={initialValues:De.exports.object};const rn=({project:r})=>{const{uuid:t}=r,[n,c]=d.exports.useState(!1),[a,p]=d.exports.useState(1),[m,h]=d.exports.useState([]),[g,_]=d.exports.useState({total:0,current:1,pageSize:10});d.exports.useEffect(()=>{(async()=>{c(!0);try{const f=await ke.logs(t,a),{data:y,meta:{pagination:C}}=f;h(y),_(C),c(!1)}catch(f){console.log(f),c(!1)}})()},[a]);const u=I=>p(I);return n?o("span",{children:[e(dt,{})," Loading..."]}):m.length?o(R,{children:[e(Ft,{children:m==null?void 0:m.map((I,f)=>{var y,C,q;return e(Ft.Item,{children:o(nt,{wrap:!1,gutter:12,children:[e(Ut,{flex:"none",children:e(je,{style:{backgroundColor:(y=I.causer)==null?void 0:y.color},children:(C=I.causer)==null?void 0:C.initials})}),o(Ut,{flex:"auto",children:[`${(q=I.causer)==null?void 0:q.first_name} ${I.description} this project.`," ",e("br",{}),e("small",{style:{color:"gray"},children:_e(I.created_at).fromNow()})]})]})},f)})}),e(Wr,{size:"small",...g,onChange:u,hideOnSinglePage:!0})]}):e(Qe,{})},an=({project:r})=>{const[t,n]=d.exports.useState(!1),c=()=>n(!t);return o(R,{children:[e(M,{icon:e(Br,{}),type:"text",onClick:c,children:"Logs"}),e(qe,{open:t,closable:!0,onClose:c,title:"Logs",children:e(rn,{project:r})})]})},{TextArea:Gt}=H,nn=({project:r})=>{var _,u,I,f;const{options:{pipol_statuses:t}}=ut(),[n,c]=d.exports.useState(!1),[a,p]=d.exports.useState(!1),[m]=s.useForm(),h=async y=>{p(!0);try{const C=await ke.pipolEntry(r.uuid,y);p(!1),ye.success({message:"Success!",description:C.message})}catch(C){ye.error({message:"Error!",description:C.response.data.message}),p(!1)}};return o(R,{children:[e(M,{icon:e(Yr,{}),onClick:()=>{var y;(y=r.permissions)!=null&&y.updatePipol?c(!0):Ne.error("You can only encode this PAP to PIPOL system if it passed validation.")},children:"PIPOL"}),e(qe,{title:"PIPOL",open:n,onClose:()=>c(!1),extra:e(M,{onClick:m.submit,icon:e(rr,{}),loading:a,type:"primary",children:"Save"}),children:o(s,{form:m,initialValues:{pipol_code:(_=r==null?void 0:r.pipol_code)!=null?_:"",pipol_status_id:(u=r==null?void 0:r.pipol_status_id)!=null?u:"",pipol_url:(I=r==null?void 0:r.pipol_url)!=null?I:"",pipol_remarks:(f=r==null?void 0:r.pipol_remarks)!=null?f:""},onFinish:h,layout:"vertical",children:[e(s.Item,{name:"pipol_code",label:"PIPOL Code",rules:[{required:!0,message:"PIPOL Code is required."}],extra:"The PIPOL Code as presented in the table of PIP entries. The previous pattern is YEAR-OU UACS Code-Incremental PAP Number.",children:e(H,{placeholder:"XXXX-XXXXX-XXXXXX"})}),e(s.Item,{name:"pipol_status_id",label:"Status in PIPOL System",rules:[{required:!0,message:"PIPOL Status is required."}],extra:"Only draft, finalized and dropped are applicable to the IPD. The reviewed and validated status is for the concerned NEDA staff.",children:e(ct,{options:t})}),e(s.Item,{name:"pipol_url",label:"URL",tooltip:"Copy the URL of the project in the PIPOL System",rules:[{required:!0,message:"This field is required."}],children:e(Gt,{autoSize:{minRows:3,maxRows:5},showCount:!0,maxLength:300})}),e(s.Item,{name:"pipol_remarks",label:"Remarks",tooltip:"Any other information you wish to note",rules:[{required:!0,message:"This field is required."}],children:e(Gt,{showCount:!0,autoSize:{minRows:3,maxRows:5},maxLength:500})})]})})]})},mr=()=>{var q,Q,W;const{id:r}=lt(),{state:{currentUser:t}}=Ie(),[n,c]=d.exports.useState(!1),[a,p]=d.exports.useState({project:null,activities:[],open:!1,loading:!1}),m=async D=>{p(v=>({...v,loading:!0}));try{const{project:v,activities:T}=await ke.get(D);p(S=>({...S,project:{...v,rdc_endorsement_date:v.rdc_endorsement_date?Ke(v.rdc_endorsement_date):"",approval_level_date:v.approval_level_date?Ke(v.approval_level_date):"",updates_as_of:v.updates_as_of?Ke(v.updates_as_of):"",fs_completion_date:v.fs_completion_date?Ke(v.fs_completion_date):""},activities:T,loading:!1}))}catch(v){p(T=>({...T,loading:!1})),ye.error({message:"Error!",description:v.response.data.message})}};d.exports.useEffect(()=>{m(r)},[r]);const h=()=>window.history.back(),{options:{pips_statuses:g}}=ut(),[_,u]=d.exports.useState({nep:0,gaa:0,disbursement:0}),I=(D,v)=>{const T=ar.map(S=>`${D}_${S}`).map(S=>({[S]:v[S]})).reduce((S,J)=>(S+=parseFloat(Object.values(J)),S),0);u(S=>({...S,[D]:T}))},f=(D,{financial_accomplishment:v})=>{["nep","gaa","disbursement"].forEach(T=>I(T,v))},y=async D=>{c(!0);try{const v=await ke.put(a.project.uuid,D);c(!1),ye.success({message:"Success!",description:v.message})}catch(v){c(!1),console.log(v),ye.error({message:"Error!",description:v.response.data.message})}},[C]=s.useForm();return o(d.exports.Fragment,{children:[e(Hr,{children:e(Xt,{title:"Edit PIP/CIP/TRIP",onBack:h,extra:o($e,{children:[e(Qa,{project:a.project}),[x.PIP_REVIEWER,x.TRIP_REVIEWER].some(D=>{var v;return(v=t.all_roles)==null?void 0:v.includes(D)})&&e(za,{}),e(an,{project:a.project}),e(X,{type:"vertical"}),((q=t.all_roles)==null?void 0:q.includes(x.PIP_REVIEWER))&&o(R,{children:[e(Ga,{project:a.project}),e(nn,{project:a.project})]}),e(M,{onClick:C.submit,loading:n,type:"primary",htmlType:"submit",disabled:!((W=(Q=a==null?void 0:a.project)==null?void 0:Q.permissions)!=null&&W.update),icon:e(rr,{}),children:"Save"})]})})}),e(dr,{children:a.loading?o("div",{children:[e(dt,{})," Loading..."]}):o(s,{form:C,initialValues:a.project,onFinish:y,labelWrap:!0,labelCol:{xl:8,lg:6},wrapperCol:{xl:12,lg:14},layout:"horizontal",onValuesChange:f,disabled:n,scrollToFirstError:!0,children:[e(ur,{form:C,totals:_,mode:"update"}),e(L,{text:"Status of Submission",children:e(s.Item,{name:"pips_status_id",label:"Status of Submission",children:e(Kr.Group,{optionType:"button",options:g==null?void 0:g.filter(D=>D.label!=="dropped")})})})]})})]})},sn=Object.freeze(Object.defineProperty({__proto__:null,default:mr},Symbol.toStringTag,{value:"Module"})),on=G.lazy(()=>z(()=>import("./dashboard.component.d6075db2.js"),["assets/dashboard.component.d6075db2.js","assets/vendor.4b18af18.js"])),ln=G.lazy(()=>z(()=>import("./tracker.component.32478146.js"),["assets/tracker.component.32478146.js","assets/vendor.4b18af18.js","assets/index.215efa2c.js","assets/index.cdd2dec0.js","assets/table-search.component.e0d14365.js","assets/download-button.component.e0598ee2.js","assets/new-button.component.3f7c8e4c.js"])),cn=G.lazy(()=>z(()=>import("./activity-logs.component.353bbc01.js"),["assets/activity-logs.component.353bbc01.js","assets/vendor.4b18af18.js"])),dn=G.lazy(()=>z(()=>import("./index.a2627d8f.js"),["assets/index.a2627d8f.js","assets/vendor.4b18af18.js"])),pn=G.lazy(()=>z(()=>import("./account.component.0abd6462.js"),["assets/account.component.0abd6462.js","assets/vendor.4b18af18.js"])),un=G.lazy(()=>z(()=>import("./pip.component.b0687fd1.js"),["assets/pip.component.b0687fd1.js","assets/vendor.4b18af18.js","assets/table-search.component.e0d14365.js","assets/download-button.component.e0598ee2.js","assets/new-button.component.3f7c8e4c.js","assets/index.cdd2dec0.js","assets/index.215efa2c.js"])),mn=G.lazy(()=>z(()=>import("./index.bbb13017.js"),["assets/index.bbb13017.js","assets/vendor.4b18af18.js"]));G.lazy(()=>z(()=>Promise.resolve().then(()=>sn),void 0));const hn=G.lazy(()=>z(()=>import("./offices.component.e611e0a8.js"),["assets/offices.component.e611e0a8.js","assets/vendor.4b18af18.js","assets/table-search.component.e0d14365.js","assets/new-button.component.3f7c8e4c.js","assets/index.cdd2dec0.js"])),gn=G.lazy(()=>z(()=>import("./users.component.be2ae3f0.js"),["assets/users.component.be2ae3f0.js","assets/users.component.f4f08968.css","assets/vendor.4b18af18.js","assets/table-search.component.e0d14365.js","assets/new-button.component.3f7c8e4c.js","assets/index.215efa2c.js"])),yn=G.lazy(()=>z(()=>import("./announcements.component.19fa91e9.js"),["assets/announcements.component.19fa91e9.js","assets/vendor.4b18af18.js","assets/download-button.component.e0598ee2.js","assets/new-button.component.3f7c8e4c.js"])),fn=G.lazy(()=>z(()=>import("./login.component.903714c1.js"),["assets/login.component.903714c1.js","assets/vendor.4b18af18.js"])),_n=G.lazy(()=>z(()=>import("./forgot-password.component.3f9b575d.js"),["assets/forgot-password.component.3f9b575d.js","assets/vendor.4b18af18.js"])),In=G.lazy(()=>z(()=>import("./reset-password.component.a853b48c.js"),["assets/reset-password.component.a853b48c.js","assets/vendor.4b18af18.js"])),bn=G.lazy(()=>z(()=>import("./no-match.component.0a996e76.js"),["assets/no-match.component.0a996e76.js","assets/vendor.4b18af18.js"])),Pn=G.lazy(()=>z(()=>import("./unauthorized.component.7eab3cd9.js"),["assets/unauthorized.component.7eab3cd9.js","assets/vendor.4b18af18.js"]));function Sn(){return e(sa,{children:o(Xr,{children:[e(w,{path:"/",element:e(Ta,{}),children:o(w,{path:"/",element:e(wa,{}),children:[e(w,{index:!0,element:e(on,{})}),e(w,{path:"/account",element:e(pn,{})}),e(w,{path:"/activity-logs",element:e(cn,{})}),o(w,{path:"/pips",children:[e(w,{element:e(Ue,{allowedRoles:[x.PIP_ENCODER,x.PIP_REVIEWER,x.ADMIN,x.TRIP_REVIEWER]}),children:e(w,{index:!0,element:e(un,{})})}),e(w,{element:e(Ue,{allowedRoles:[x.PIP_ENCODER,x.PIP_REVIEWER]}),children:e(w,{exact:!0,path:"create",element:e(mn,{})})}),e(w,{element:e(Ue,{allowedRoles:[x.PIP_ENCODER,x.PIP_REVIEWER,x.ADMIN,x.TRIP_REVIEWER]}),children:e(w,{path:":id",element:e(mr,{})})})]}),e(w,{element:e(Ue,{allowedRoles:[x.PIP_ENCODER,x.PIP_REVIEWER,x.TRIP_REVIEWER,x.ADMIN]}),children:e(w,{path:"/reports",element:e(dn,{})})}),e(w,{element:e(Ue,{allowedRoles:[x.PIP_REVIEWER,x.TRIP_REVIEWER,x.ADMIN]}),children:e(w,{path:"/tracker",element:e(ln,{})})}),o(w,{element:e(Ue,{allowedRoles:[x.ADMIN]}),children:[e(w,{path:"/offices",element:e(hn,{})}),e(w,{path:"/users",element:e(gn,{})}),e(w,{path:"/announcements",element:e(yn,{})})]})]})}),e(w,{element:e(La,{}),children:o(w,{path:"/auth",element:e(Ua,{}),children:[e(w,{index:!0,element:e(fn,{})}),e(w,{path:"/auth/forgot-password",element:e(_n,{})}),e(w,{path:"/auth/reset-password",element:e(In,{})})]})}),e(w,{path:"/unauthorized",element:e(Pn,{})}),e(w,{path:"/pips/:id/print",element:e(ja,{})}),e(w,{path:"*",element:e(bn,{})})]})})}const xn=Jr(document.getElementById("root"));dt.setDefaultIndicator(e(Zr,{}));_e.locale("en");_e.updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"%ds",ss:"%ds",m:"a min",mm:"%dm",h:"an hr",hh:"%dh",d:"a day",dd:"%dd",w:"a wk",ww:"%dw",M:"a mo",MM:"%dmos",y:"a yr",yy:"%dy"}});xn.render(e(la,{children:e(ba,{children:e(ma,{children:e(ha,{children:e(ua,{children:e($a,{children:e(ea,{children:e(Sn,{})})})})})})})}));export{Xe as A,Re as C,dr as I,da as O,ke as P,x as R,A as S,pa as U,ar as Y,b as a,Ie as b,Cn as c,ut as d,et as e,ur as f,vn as g,En as h,Pa as u};
