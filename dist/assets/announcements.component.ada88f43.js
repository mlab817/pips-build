import{r as a,ab as l,b as c,F as C,j as e,B as p,an as A,D as j,ad as h,n as S,a1 as I,N as T,S as k,b0 as E,b1 as q,b2 as z,a4 as F,h as N}from"./vendor.876bea49.js";import{S as O,a as f,e as b,I as R}from"./index.102412c5.js";import{R as M}from"./download-button.component.e8a689a9.js";import"./new-button.component.16b65bab.js";const v=["success","info","warning","error"],_=()=>{const[i,s]=a.exports.useState(!1),[d,r]=a.exports.useState(!1),[u]=l.useForm(),m=async n=>{r(!0);try{const o=await f.post("/announcements",n);S.success({message:b.SUCCESS_MESSAGE,description:o.data.message}),r(!1)}catch(o){S.error({message:b.ERROR_MESSAGE,description:o.response.data.message}),r(!1)}};return c(C,{children:[e(p,{icon:e(A,{}),type:"primary",onClick:()=>s(!0),children:"New"}),e(j,{open:i,title:"New Announcement",closable:!0,onClose:()=>s(!1),extra:e(p,{loading:d,type:"primary",onClick:u.submit,children:"Submit"}),children:c(l,{form:u,initialValues:{type:"",subject:"",message:""},onFinish:m,layout:"vertical",children:[e(l.Item,{name:"type",label:"Type",rules:[{required:!0,message:"This field is required."}],children:e(O,{options:v.map(n=>({label:n,value:n}))})}),e(l.Item,{name:"subject",label:"Subject",rules:[{required:!0,message:"This field is required."}],children:e(h.TextArea,{autoSize:!0})}),e(l.Item,{name:"message",label:"Message",rules:[{required:!0,message:"This field is required."}],children:e(h.TextArea,{autoSize:{minRows:4}})})]})})]})},H=()=>{const[i,s]=a.exports.useState({data:[],pagination:{},loading:!1,error:null}),[d,r]=a.exports.useState(1),u=[{title:"Subject",key:"subject",dataIndex:"subject",width:"20%"},{title:"Message",key:"message",dataIndex:"message",width:"70%"},{title:"Added on",key:"created_at",dataIndex:"created_at",align:"right",render:t=>N(t).fromNow()}],m=async()=>{s(t=>({...t,loading:!0}));try{const t=await f.get("/announcements",{params:{page:d}}),{data:g,pagination:y}=t.data;s(w=>({...w,pagination:y,data:g,loading:!1}))}catch(t){s(g=>({...g,loading:!1,error:t}))}};a.exports.useEffect(()=>{m()},[d]);const n=t=>r(t),[o,x]=a.exports.useState("small");return c(a.exports.Fragment,{children:[e(I,{title:c("span",{children:[e(T,{})," Announcements"]}),extra:c(k,{children:[e(M,{onClick:m}),e(_,{}),e(E,{options:[{value:"small",icon:e(q,{})},{value:"middle",icon:e(z,{})}],onChange:t=>x(t)})]})}),e(R,{children:e(F,{loading:i.loading,rowKey:t=>t.id,dataSource:i.data,columns:u,pagination:{...i.pagination,position:["bottomCenter"],onChange:n,showSizeChanger:!1},size:o})})]})};export{H as default};
