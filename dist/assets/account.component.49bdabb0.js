import{a9 as r,r as o,b as n,aU as C,j as e,B as I,A,aP as E,a4 as v,P as k,ab as i,aV as V,aW as T,m as N,n as u,e as U,au as h,$ as M,F as O,U as j,g as B}from"./vendor.717f8fec.js";import{b as _,A as S,I as R}from"./index.4d0a637e.js";const x=({showPassword:s,onClick:t})=>s?e(V,{onClick:t}):e(T,{onClick:t}),L=()=>{const{state:{currentUser:s},logoutUser:t}=_(),[m]=r.useForm(),[p,f]=o.exports.useState(""),[g,l]=o.exports.useState(!1),[a,w]=o.exports.useState(!1),c=()=>w(!a),y=async d=>{if(f(""),!!confirm("This will log you out on all devices. Continue?")){l(!0);try{const b=await S.updatePassword(d);l(!1),N.success(b.message),t()}catch(b){l(!1),u.error({message:"Success!",description:b.response.data.message})}}},[q,P]=o.exports.useState(!1),F=async()=>{P(!0);try{const d=await S.sendEmailVerification();u.success({message:"Success!",description:d.message}),P(!1)}catch(d){u.error({message:"Error!",description:d.response.data.message}),P(!1)}};return n(o.exports.Fragment,{children:[n(C,{title:"Verify Email",style:{marginBottom:16},extra:e(I,{type:"primary",onClick:F,disabled:!!(s!=null&&s.email_verified_at),loading:q,children:"Request Verification"}),children:[e("p",{children:"A verified email helps secure your account."}),e(A,{icon:e(E,{})})," ",s==null?void 0:s.email," ",e(v,{style:{color:s!=null&&s.email_verified_at?"#006837":"gray"}})]}),e(C,{title:"Update Password",extra:e(I,{type:"primary",onClick:m.submit,loading:g,children:"Save"}),children:n(r,{form:m,layout:"vertical",onFinish:y,initialValues:{current_password:"",password:"",password_confirmation:""},wrapperCol:{span:12},children:[p&&e(r.Item,{children:e(k,{message:p,type:"error",showIcon:!0})}),e(r.Item,{label:"Current Password",name:"current_password",rules:[{required:!0,message:"This field is required."}],children:e(i,{type:a?"text":"password",placeholder:"Current Password",suffix:e(x,{showPassword:a,onClick:c})})}),e(r.Item,{label:"New Password",name:"password",rules:[{required:!0,message:"This field is required."}],children:e(i,{type:a?"text":"password",placeholder:"New Password",suffix:e(x,{showPassword:a,onClick:c})})}),e(r.Item,{label:"Confirm Password",name:"password_confirmation",rules:[{required:!0,message:"This field is required."}],children:e(i,{type:a?"text":"password",placeholder:"Confirm Password",suffix:e(x,{showPassword:a,onClick:c})})})]})})]})},H=()=>{const[s]=r.useForm(),{state:t,updateUserProfile:m}=_(),{currentUser:p}=t,{first_name:f,last_name:g,position:l,contact_number:a}=p,w=async c=>{try{await m(c),u.success({message:"Success",description:"Successfully updated user account"})}catch(y){u.success({message:"Error",description:y.response.data.message})}};return e(C,{title:"Profile",extra:e(I,{type:"primary",onClick:s.submit,loading:t.loading,children:"Update"}),children:e(r,{form:s,initialValues:{first_name:f,last_name:g,position:l,contact_number:a},layout:"vertical",onFinish:w,children:n(U,{gutter:[16,16],children:[e(h,{md:12,sm:24,xs:24,children:e(r.Item,{label:"First Name",name:"first_name",rules:[{required:!0}],children:e(i,{})})}),e(h,{md:12,sm:24,xs:24,children:e(r.Item,{label:"Last Name",name:"last_name",rules:[{required:!0}],children:e(i,{})})}),e(h,{md:12,sm:24,xs:24,children:e(r.Item,{label:"Position",name:"position",rules:[{required:!0}],children:e(i,{})})}),e(h,{md:12,sm:24,xs:24,children:e(r.Item,{label:"Contact No.",name:"contact_number",rules:[{required:!0}],children:e(i,{})})})]})})})},z=()=>{const s=[{label:"Profile",key:"item-1",children:e(H,{})},{label:"Security",key:"item-2",children:e(L,{})}];return n(o.exports.Fragment,{children:[e(M,{title:n(O,{children:[e(j,{})," Manage Account"]})}),e(R,{children:e(B,{tabPosition:"left",items:s})})]})};export{z as default};
