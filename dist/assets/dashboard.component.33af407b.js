import{r as s,b as o,j as e,a1 as F,F as R,v as w,a3 as I,e as P,aw as a,Y as l,aI as i,o as c,as as d,h as z,aJ as m}from"./vendor.876bea49.js";import{u as V,I as k,a as U}from"./index.c1131783.js";const b=(t=0,h=0,r=120)=>{let u=t/100,p=(r-h)*u,g=p+h;return"hsl("+g+", 100%, 50%)"},Z=({status:t})=>e(a,{xs:24,sm:12,lg:4,children:o(l,{style:{borderColor:t.color,height:"100%"},children:[e(i,{title:t.name.toUpperCase(),value:t.projects_count}),e("span",{style:{position:"absolute",top:24,right:24},children:e(c,{title:t.description,children:e(d,{style:{color:"gray"}})})})]})}),B=()=>{const[t,h]=s.exports.useState([{name:"DRAFT",projects_count:0},{name:"FINALIZED",projects_count:0},{name:"DROPPED",projects_count:0},{name:"DROPPED BY IPD",projects_count:0}]),[r,u]=s.exports.useState(0),[p,g]=s.exports.useState(0),[S,x]=s.exports.useState(0),[A,E]=s.exports.useState(0),{loading:T,deadline:C}=V();return s.exports.useEffect(()=>{const n=new AbortController;return(async()=>{var y;const v=await U.get("/dashboard",{signal:n.signal}),{pips_statuses:D,total:N,validated:L,endorsed:j}=v.data,O=(y=D.filter(_=>_.name==="FINALIZED")[0])==null?void 0:y.projects_count;h(D),u(N),x(L),E(j),g(O)})(),()=>n.abort()},[]),o(s.exports.Fragment,{children:[e(F,{title:o(R,{children:[e(w,{})," Dashboard"]})}),o(k,{children:[e(I,{children:"PIPS STATUS"}),o(P,{gutter:[16,16],children:[t==null?void 0:t.map((n,f)=>(r>0&&Math.round(n.projects_count/r*100),e(Z,{status:n},f))),e(a,{xs:24,sm:24,lg:4,children:o(l,{style:{height:"100%"},children:[e(i,{title:"TOTAL",value:r}),e("span",{style:{position:"absolute",top:24,right:24},children:e(c,{title:"Total no. of PAPs encoded by the office in the PIPS",children:e(d,{style:{color:"gray"}})})})]})}),e(a,{xs:24,sm:24,lg:4,children:o(l,{style:{backgroundColor:"rgba(255, 0, 0, 0.2)",height:"100%"},children:[e(i.Countdown,{style:{color:"#fff"},title:"TIME UNTIL DEADLINE",value:T?0:z(C),suffix:"hrs"}),e("span",{style:{position:"absolute",top:24,right:24},children:e(c,{title:"Time remaining until the closing of encoding in the PIPS",children:e(d,{style:{color:"gray"}})})})]})})]}),e(I,{children:"VALIDATION AND ENDORSEMENT STATUS"}),o(P,{gutter:[16,16],children:[e(a,{xs:24,sm:12,lg:12,children:o(l,{children:[e(i,{title:"VALIDATED VS FINALIZED",value:S,suffix:" / "+p}),e(m,{strokeColor:b(0),percent:0}),e("span",{style:{position:"absolute",top:24,right:24},children:e(c,{title:"No. of PAPs validated vs those finalized by encoder",children:e(d,{style:{color:"gray"}})})})]})}),e(a,{xs:24,sm:12,lg:12,children:o(l,{children:[e(i,{title:"PIPOL ENDORSED VS FINALIZED",value:A,suffix:" / "+p}),e(m,{strokeColor:b(0),percent:0}),e("span",{style:{position:"absolute",top:24,right:24},children:e(c,{title:"No. of PAPs endorsed in the PIPOL system vs those finalized by encoder",children:e(d,{style:{color:"gray"}})})})]})})]})]})]})};export{B as default};
